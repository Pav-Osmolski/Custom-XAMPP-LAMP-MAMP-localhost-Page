(()=>{"use strict";function t(){var t=document.querySelector(".clock");if(t){var e=new Date;t.textContent=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function o(t){localStorage.setItem("columnSize",t);var e=document.querySelector(".columns");e&&(e.classList.forEach(function(t){t.startsWith("max-")&&e.classList.remove(t)}),"auto"!==t&&e.classList.add(t))}function r(t,e){var n=localStorage.getItem("columnSize"),r=e.indexOf(n);-1===r&&(r="next"===t?-1:0),"next"===t&&r<e.length-1?r+=1:"prev"===t&&r>0&&(r-=1),o(e[r])}function a(t){var e=document.querySelector(t);if(e&&"1"!==e.dataset.sortBound){e.dataset.sortBound="1";var n=null;e.addEventListener("pointerdown",function(t){var n=t.target.closest("li");n&&e.contains(n)&&(t.target.closest('input, select, textarea, button, a, [contenteditable=""], .no-drag')||(n.draggable=!0))},{capture:!0}),e.addEventListener("dragstart",function(t){var o=t.target.closest("li");o&&e.contains(o)&&(n=o,t.dataTransfer.effectAllowed="move",o.classList.add("dragElem"))}),e.addEventListener("dragenter",function(t){var n=t.target.closest("li");n&&e.contains(n)&&n.classList.add("over")}),e.addEventListener("dragover",function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"}),e.addEventListener("dragleave",function(t){var n=t.target.closest("li");n&&e.contains(n)&&n.classList.remove("over")}),e.addEventListener("drop",function(t){t.preventDefault();var o=t.target.closest("li");if(o&&e.contains(o)){if(n&&n!==o){var r=Array.from(e.children);r.indexOf(n)<r.indexOf(o)?e.insertBefore(n,o.nextSibling):e.insertBefore(n,o),e.dispatchEvent(new CustomEvent("sorted",{bubbles:!0}))}o.classList.remove("over")}}),e.addEventListener("dragend",function(t){var n=t.target.closest("li");n&&e.contains(n)&&(n.classList.remove("dragElem"),n.draggable=!1),Array.from(e.children).forEach(function(t){return t.classList.remove("over")})})}}function i(t){var e=t.sectionId,n=t.toggleButtonId,o=t.logElementId,r=t.endpoint;document.addEventListener("DOMContentLoaded",function(){var t=document.body;if(document.getElementById(e)){var a=document.getElementById(n),i=document.getElementById(o);a&&i&&(a.addEventListener("click",function(){var t=i.classList.contains("visible");i.classList.toggle("visible",!t),this.setAttribute("aria-expanded",!t)}),"true"===t.getAttribute("data-ajax-enabled")&&fetch("".concat(window.BASE_URL).concat(r),{cache:"no-store"}).then(function(t){return t.ok?t.text():Promise.reject()}).then(function(t){c(t),setInterval(l,3e3)}).catch(function(){}))}function c(t){var e=""===t.trim();i.innerHTML=e?'<code class="muted">No errors logged. You\'re doing great. 🎉</code>':"<code>".concat(t,"</code>")}function l(){fetch("".concat(window.BASE_URL).concat(r),{cache:"no-store"}).then(function(t){return t.ok?t.text():Promise.reject()}).then(c)}})}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,a,i,c=[],l=!0,d=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=a.call(n)).done)&&(c.push(o.value),c.length!==e);l=!0);}catch(t){d=!0,r=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function u(){var t,e=(null===(t=document.querySelector(".search-bar"))||void 0===t?void 0:t.value.toLowerCase())||"";document.querySelectorAll(".folders li").forEach(function(t){var n=t.textContent.toLowerCase();t.style.display=n.includes(e)?"":"none"})}function s(t){document.documentElement.className="","default"!==t&&document.documentElement.classList.add("".concat(t,"-theme")),document.body.classList.remove("light-mode"),"undefined"!=typeof themeTypes&&"light"===themeTypes[t]&&document.body.classList.add("light-mode")}function m(){document.querySelectorAll("[data-generate-cert]").forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.generateCert;confirm("Generate a new SSL certificate for "+e+"?")&&fetch("".concat(window.BASE_URL,"utils/generate_cert.php?name=").concat(encodeURIComponent(e))).then(function(t){return t.text()}).then(function(t){if(alert(t),t.includes("successfully")){var e=document.getElementById("restart-apache");e&&e.click()}}).catch(function(){return alert("Failed to run cert script.")})})})}function f(){var t=document.getElementById("vhost-filter"),e=document.querySelectorAll("#vhosts-table tbody tr");t&&e.length&&t.addEventListener("change",function(){var n=t.value,o=0;e.forEach(function(t){var e=t.classList.contains("vhost-ssl"),r=t.classList.contains("cert-valid"),a=t.classList.contains("host-valid"),i=!0;"missing-cert"===n?i=!r:"missing-host"===n?i=!a:"ssl-only"===n?i=e:"non-ssl"===n&&(i=!e),t.style.display=i?"":"none",i&&o++});var r=document.getElementById("vhost-empty-msg");r&&(r.style.display=0===o?"":"none")})}function v(){document.addEventListener("click",function(t){if(t.target.matches(".open-folder")){var e=t.target.dataset.path.replace(/^"(.*)"$/,"$1");e&&fetch("".concat(window.BASE_URL,"utils/open_folder.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})})}})}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,a,i,c=[],l=!0,d=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=a.call(n)).done)&&(c.push(o.value),c.length!==e);l=!0);}catch(t){d=!0,r=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw r}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var g;document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("restart-apache-button");t&&t.addEventListener("click",function(){return t="restart",void((e=document.getElementById("apache-status-message"))&&(e.innerText="Executing "+t+"...",fetch("".concat(window.BASE_URL,"utils/toggle_apache.php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action="+encodeURIComponent(t)}).then(function(t){return t.text()}).then(function(t){try{var n=JSON.parse(t);e.innerText=n.message,"function"==typeof renderServerInfo&&renderServerInfo()}catch(n){console.error("Invalid JSON:",t),e.innerText="Error: Invalid server response"}}).catch(function(t){e.innerText="Error: "+t})));var t,e})}),document.addEventListener("DOMContentLoaded",function(){t(),setInterval(t,1e3)}),g=["max-xs","max-sm","max-md","max-lg"],document.addEventListener("DOMContentLoaded",function(){var t=localStorage.getItem("columnSize");t&&o(t);var e=document.getElementById("reset-width"),n=document.getElementById("prev-width"),a=document.getElementById("next-width");e&&e.addEventListener("click",function(){return o("auto")}),n&&n.addEventListener("click",function(){return r("prev",g)}),a&&a.addEventListener("click",function(){return r("next",g)})}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".columns");if(t){var n=null,o=JSON.parse(localStorage.getItem("columnOrder")||"[]");o.length&&o.forEach(function(e){var n=document.getElementById(e);n&&t.appendChild(n)}),t.querySelectorAll(".column:not(.column-controls)").forEach(function(o){var r=o.querySelector(".drag-handle");r&&(o.setAttribute("draggable",!1),r.addEventListener("mousedown",function(){o.setAttribute("draggable",!0)}),r.addEventListener("mouseup",function(){o.setAttribute("draggable",!1)}),o.addEventListener("dragstart",function(){n=o,o.style.opacity="0.5"}),o.addEventListener("dragend",function(){var e;n=null,o.style.opacity="1",o.setAttribute("draggable",!1),e=Array.from(t.children).filter(function(t){return!t.classList.contains("column-controls")}).map(function(t){return t.id}),localStorage.setItem("columnOrder",JSON.stringify(e))}),o.addEventListener("dragover",function(t){return t.preventDefault()}),o.addEventListener("drop",function(r){if(r.preventDefault(),n&&n!==o){var a=e(t.children),i=a.indexOf(o);a.indexOf(n)<i?o.after(n):o.before(n)}}))})}}),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("dock-list"),e=document.getElementById("add-dock-item"),n=document.querySelector("#settings-view form");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement("li");n.className="dock-item",n.innerHTML='\n\t\t\t\t<input type="text" placeholder="Label" value="'.concat(e.label||"",'">\n\t\t\t\t<input type="text" placeholder="URL" value="').concat(e.url||"",'">\n\t\t\t\t<input type="text" placeholder="Icon" value="').concat(e.icon||"",'">\n\t\t\t\t<input type="text" placeholder="Alt Text" value="').concat(e.alt||"",'">\n\t\t\t\t<button type="button" class="remove-dock-item">❌</button>\n\t\t\t'),t.appendChild(n),n.querySelector(".remove-dock-item").addEventListener("click",function(){n.remove(),r()}),Array.from(n.querySelectorAll("input")).forEach(function(t){t.addEventListener("input",r)})}function r(){var e=[];Array.from(t.children).forEach(function(t){var n=t.querySelectorAll("input");n.length<4||e.push({label:n[0].value.trim(),url:n[1].value.trim(),icon:n[2].value.trim(),alt:n[3].value.trim()})});var n=document.getElementById("dock_json_input");n&&(n.value=JSON.stringify(e,null,2))}t&&e&&n&&(fetch("".concat(window.BASE_URL,"utils/read_config.php?file=dock"),{cache:"no-store"}).then(function(t){return t.json()}).then(function(e){e.forEach(o),a("#dock-list"),t.addEventListener("sorted",r),r()}),e.addEventListener("click",function(){o(),a("#dock-list"),r()}))}),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("folders-config-list"),e=document.getElementById("add-folder-column"),n=document.getElementById("folders_json_input");if(t&&e&&n){var o=[],r='<option value="">(none)</option>',i=!1,l=null;t.addEventListener("input",function(t){t.target.matches('input[type="text"], select')&&f()}),t.addEventListener("change",function(t){t.target.matches('select, input[type="checkbox"]')&&f()}),t.addEventListener("click",function(t){if(t.target.closest(".add-special")){var e,n=null===(e=t.target.closest(".folder-config-item"))||void 0===e?void 0:e.querySelector(".special-cases");n&&(n.insertAdjacentHTML("beforeend",u()),f())}if(t.target.closest(".remove-special")){var o=t.target.closest(".special-case");o&&(o.remove(),f())}if(t.target.closest(".remove-folder-column")){var r=t.target.closest(".folder-config-item");r&&(r.remove(),f())}}),t.addEventListener("sorted",function(){i=!0,v()}),Promise.all([fetch("".concat(window.BASE_URL,"utils/read_config.php?file=folders"),{cache:"no-store"}).then(function(t){return t.json()}).catch(function(){return[]}),Array.isArray(window.LINK_TEMPLATES)?(o=window.LINK_TEMPLATES.map(function(t){return t&&"string"==typeof t.name?t.name.trim():""}).filter(Boolean),o=Array.from(new Set(o)),r='<option value="">(none)</option>'+o.map(function(t){return'<option value="'.concat(t,'">').concat(t,"</option>")}).join(""),Promise.resolve(o)):fetch("".concat(window.BASE_URL,"utils/read_config.php?file=link_templates"),{cache:"no-store"}).then(function(t){return t.json()}).then(function(t){return o=(Array.isArray(t)?t:[]).map(function(t){return t&&"string"==typeof t.name?t.name.trim():""}).filter(Boolean),o=Array.from(new Set(o)),r='<option value="">(none)</option>'+o.map(function(t){return'<option value="'.concat(t,'">').concat(t,"</option>")}).join(""),o}).catch(function(){return r='<option value="">(none)</option>',o=[]})]).then(function(e){var n,r,l,d=c(e,1)[0];a("#folders-config-list"),Array.isArray(d)&&d.length&&(n=d,r=document.createDocumentFragment(),(l=document.createElement("div")).innerHTML=n.map(s).join(""),Array.from(l.children).forEach(function(t){return r.appendChild(t)}),t.appendChild(r),t.querySelectorAll(".folder-config-item").forEach(function(t){var e=t.querySelector(".link-template-select");if(e){var r,a=(null===(r=t.querySelector('input[data-key="title"]'))||void 0===r?void 0:r.value)||"",i=n.find(function(t){return(t.title||"")===a}),c=(null==i?void 0:i.linkTemplate)||"";c&&(e.value=c),e.disabled=0===o.length}})),0===t.children.length&&m({}),i=!0,v()}),e.addEventListener("click",function(){m({})})}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.match||"",n=t.replace||"";return'\n\t\t\t\t<div class="special-case">\n\t\t\t\t\t<input type="text" class="sc-match" placeholder="Match Regex" value="'.concat(e,'">\n\t\t\t\t\t<input type="text" class="sc-replace" placeholder="Replace Regex" value="').concat(n,'">\n\t\t\t\t\t<button type="button" class="remove-special">✖</button>\n\t\t\t\t</div>\n\t\t\t')}function s(){var t,e,n,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(a=i.specialCases,a&&"object"===d(a)&&!Array.isArray(a)?Object.entries(a).map(function(t){var e=c(t,2),n=e[0],o=e[1];return{match:String(null!=n?n:""),replace:String(null!=o?o:"")}}):[]).map(u).join("");return i.linkTemplate,'\n\t\t\t\t<li class="folder-config-item">\n\t\t\t\t\t<input type="text" data-key="title" placeholder="Title" value="'.concat(i.title||"",'">\n\t\t\t\t\t<input type="text" data-key="href" placeholder="Href (optional)" value="').concat(i.href||"",'">\n\t\t\t\t\t<input type="text" data-key="dir" placeholder="Dir (relative to HTDOCS_PATH)" value="').concat(i.dir||"",'">\n\t\t\t\t\t<input type="text" data-key="excludeList" placeholder="Exclude List (comma-separated)" value="').concat((i.excludeList||[]).join(","),'">\n\t\t\t\t\t<input type="text" data-key="match" placeholder="Match Regex" value="').concat(null!==(t=null===(e=i.urlRules)||void 0===e?void 0:e.match)&&void 0!==t?t:"",'">\n\t\t\t\t\t<input type="text" data-key="replace" placeholder="Replace Regex" value="').concat(null!==(n=null===(o=i.urlRules)||void 0===o?void 0:o.replace)&&void 0!==n?n:"",'">\n\t\t\t\t\t<label>Link Template:\n\t\t\t\t\t\t<select class="link-template-select" name="linkTemplate">').concat(r,'</select>\n\t\t\t\t\t</label>\n\t\t\t\t\t<label><input type="checkbox" class="disable-links"').concat(i.disableLinks?" checked":"",'> Disable Links</label>\n\n\t\t\t\t\t<div class="special-cases-wrapper">\n\t\t\t\t\t\t<label>Special Cases:</label>\n\t\t\t\t\t\t<div class="special-cases">').concat(l,'</div>\n\t\t\t\t\t\t<button type="button" class="add-special">➕ Add Rule</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button type="button" class="remove-folder-column">❌</button>\n\t\t\t\t</li>\n\t\t\t')}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement("div");n.innerHTML=s(e);var r=n.firstElementChild;t.appendChild(r);var a=r.querySelector(".link-template-select");a&&(a.disabled=0===o.length,e.linkTemplate&&(a.value=e.linkTemplate)),f()}function f(){i=!0,l&&clearTimeout(l),l=setTimeout(v,120)}function v(){var e;l=null,i&&(n.value=JSON.stringify((e=[],t.querySelectorAll(".folder-config-item").forEach(function(t){var n,o,r,a,i,c,l,d,u=function(e){return t.querySelector(e)},s=(null===(n=u('input[data-key="title"]'))||void 0===n?void 0:n.value.trim())||"",m=(null===(o=u('input[data-key="href"]'))||void 0===o?void 0:o.value.trim())||"",f=(null===(r=u('input[data-key="dir"]'))||void 0===r?void 0:r.value.trim())||"",v=(null===(a=u('input[data-key="excludeList"]'))||void 0===a?void 0:a.value)||"",p=(null===(i=u('input[data-key="match"]'))||void 0===i?void 0:i.value)||"",h=(null===(c=u('input[data-key="replace"]'))||void 0===c?void 0:c.value)||"",g=(null===(l=t.querySelector(".link-template-select"))||void 0===l?void 0:l.value)||"",y=!(null===(d=t.querySelector(".disable-links"))||void 0===d||!d.checked),E=[];t.querySelectorAll(".special-case").forEach(function(t){var e,n,o=(null===(e=t.querySelector(".sc-match"))||void 0===e?void 0:e.value)||"",r=(null===(n=t.querySelector(".sc-replace"))||void 0===n?void 0:n.value)||"";(o.length||r.length)&&E.push({match:o,replace:r})});var L,S=(L={},E.forEach(function(t){var e=t.match,n=void 0===e?"":e,o=t.replace,r=void 0===o?"":o,a=String(n).trim(),i=String(r).trim();(a.length||i.length)&&(L[a]=i)}),L),b=v.split(",").map(function(t){return t.trim()}).filter(Boolean),x={title:s,href:m,dir:f,excludeList:b,urlRules:{match:p,replace:h},linkTemplate:g,disableLinks:y,specialCases:S};(s||m||f||b.length||p||h||g||y||Object.keys(S).length)&&e.push(x)}),e),null,2),i=!1)}}),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("link-templates-list"),e=document.getElementById("add-link-template");function n(){var e=[];t.querySelectorAll(".template-item").forEach(function(t){var n,o,r=null===(n=t.querySelector(".template-name"))||void 0===n?void 0:n.value.trim(),a=null===(o=t.querySelector(".template-html"))||void 0===o?void 0:o.value.trim();r&&a&&e.push({name:r,html:a})});var n=document.getElementById("link_templates_json_input");n&&(n.value=JSON.stringify(e,null,2))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=document.createElement("li");o.className="template-item",o.innerHTML='\n        <input type="text" class="template-name" placeholder="Template Name" value="'.concat(e.name||"",'">\n        <input type="text" class="template-html" placeholder="HTML Template" value="').concat(e.html||"",'">\n        <button type="button" class="remove-template">❌</button>\n      '),o.querySelector(".remove-template").addEventListener("click",function(){o.remove(),n()}),Array.from(o.querySelectorAll("input")).forEach(function(t){t.addEventListener("input",n)}),t.appendChild(o),n()}t&&e&&(e.addEventListener("click",function(){return o()}),t.innerHTML="",fetch("".concat(window.BASE_URL,"utils/read_config.php?file=link_templates"),{cache:"no-store"}).then(function(t){return t.json()}).then(function(t){t.forEach(o),n()}))}),i({sectionId:"apache-error-log-section",toggleButtonId:"toggle-apache-error-log",logElementId:"apache-error-log",endpoint:"utils/apache_error_log.php"}),i({sectionId:"php-error-log-section",toggleButtonId:"toggle-php-error-log",logElementId:"php-error-log",endpoint:"utils/php_error_log.php"}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".search-bar");t&&t.addEventListener("input",u)}),document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("clear-local-storage");t&&t.addEventListener("click",function(){if(confirm("Are you sure you want to reset saved UI settings?")){var t=["theme","columnOrder","columnSize"];Object.keys(localStorage).forEach(function(e){t.some(function(t){return e.startsWith(t)})&&localStorage.removeItem(e)}),alert("Saved settings have been cleared from local storage."),location.reload()}})}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".post-confirmation-container");t&&setTimeout(function(){t.style.transition="opacity 0.5s ease",t.style.opacity="0",setTimeout(function(){return t.remove()},500)},3e3)}),document.addEventListener("DOMContentLoaded",function(){var t=document.body;if(document.getElementById("system-monitor")&&"true"===t.getAttribute("data-ajax-enabled")){var e=document.getElementById("cpu-load"),n=document.getElementById("memory-usage"),o=document.getElementById("disk-space");fetch("".concat(window.BASE_URL,"utils/system_stats.php"),{cache:"no-store"}).then(function(t){if(t.ok)return t.json()}).then(function(t){e.textContent="".concat(t.cpu,"%"),n.textContent="".concat(t.memory," MB"),o.textContent="".concat(t.disk,"%"),setInterval(r,1e3),r()}).catch(function(){})}function r(){fetch("".concat(window.BASE_URL,"utils/system_stats.php"),{cache:"no-store"}).then(function(t){if(!t.ok)throw new Error("System stats unavailable");return t.json()}).then(function(t){e.textContent="".concat(t.cpu,"%"),n.textContent="".concat(t.memory," MB"),o.textContent="".concat(t.disk,"%")})}}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector("#theme-selector");if(t){var e=localStorage.getItem("theme")||serverTheme||"default";s(e),t.value=e,t.addEventListener("change",function(t){var e=t.target.value;s(e),localStorage.setItem("theme",e)})}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){m(),f(),v()}):(m(),f(),v()),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".toggle-content-container").forEach(function(t,e){var n=t.querySelector(".toggle-accordion"),o=t.querySelector(".toggle-content");if(n&&o){var r=parseInt(o.dataset.collapsedHeight)||0,a=t.dataset.id||"accordion-"+e;"open"===localStorage.getItem("accordion_"+a)?(t.classList.add("open"),o.style.height=o.scrollHeight+"px",requestAnimationFrame(function(){o.style.height="auto"})):(t.classList.remove("open"),o.style.height=r+"px"),n.addEventListener("click",function(e){if(e.stopPropagation(),!function(t,e){return!!t.target.closest(e)}(e,".tooltip-icon")){var n=t.classList.toggle("open");if(localStorage.setItem("accordion_"+a,n?"open":"closed"),n){o.style.height=o.scrollHeight+"px";var i=function(){o.style.height="auto",o.removeEventListener("transitionend",i)};o.addEventListener("transitionend",i)}else o.style.height=o.scrollHeight+"px",o.offsetHeight,requestAnimationFrame(function(){o.style.height=r+"px"})}})}}),window.addEventListener("resize",function(){document.querySelectorAll(".toggle-content-container.open .toggle-content").forEach(function(t){"auto"!==t.style.height&&(t.style.height=t.scrollHeight+"px")})})}),document.addEventListener("DOMContentLoaded",function(){var t={index:document.getElementById("folders-view"),settings:document.getElementById("settings-view"),phpinfo:document.getElementById("phpinfo-view"),apache:document.getElementById("apache-view"),mysql:document.getElementById("mysql-view")},e={index:"index",settings:"settings",phpinfo:"phpinfo","apache-inspector":"apache","mysql-inspector":"mysql"};function n(){return new URLSearchParams(window.location.search).get("view")||"index"}function o(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e[n]||"index";if(Object.entries(t).forEach(function(t){var e=p(t,2),n=e[0],o=e[1];o&&o.classList.toggle("visible",n===r)}),"apache"===r||"mysql"===r){var a=t[r];if(!a.dataset.loaded){a.innerHTML='<div class="loader"><span class="spinner" role="img" aria-label="Loading"></span></div>';var i="utils/".concat(r,"_inspector.php");fetch("".concat(window.BASE_URL||"/").concat(i)).then(function(t){return t.text()}).then(function(t){a.innerHTML=t,a.dataset.loaded="true"}).catch(function(t){a.innerHTML='<p class="error">Failed to load '.concat(i,"</p>"),console.error("[view.js] Failed to fetch ".concat(i),t)})}}if(o){var c=window.BASE_URL||window.location.pathname,l="index"===r?"":"?view="+encodeURIComponent(n);history.pushState({},"",c+l)}}Object.entries({"toggle-index":"index","toggle-settings":"settings","toggle-phpinfo":"phpinfo","toggle-apache-inspector":"apache-inspector","toggle-mysql-inspector":"mysql-inspector"}).forEach(function(t){var e=p(t,2),n=e[0],r=e[1],a=document.getElementById(n);a&&a.addEventListener("click",function(t){t.preventDefault(),o(r,!0)})}),o(n()),window.addEventListener("popstate",function(){o(n())})})})();
//# sourceMappingURL=script.min.js.map