(()=>{"use strict";function t(){var t=document.querySelector(".clock");if(t){var e=new Date;t.textContent=e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(t){localStorage.setItem("columnSize",t);var e=document.querySelector(".columns");e&&(e.classList.forEach((function(t){t.startsWith("max-")&&e.classList.remove(t)})),"auto"!==t&&e.classList.add(t))}function o(t,e){var n=localStorage.getItem("columnSize"),o=e.indexOf(n);-1===o&&(o="next"===t?-1:0),"next"===t&&o<e.length-1?o+=1:"prev"===t&&o>0&&(o-=1),r(e[o])}function a(t){var e=document.querySelector(t);if(e){var n=null;Array.from(e.children).forEach(u)}function r(t){n=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.outerHTML),this.classList.add("dragElem")}function o(t){return t.preventDefault&&t.preventDefault(),this.classList.add("over"),t.dataTransfer.dropEffect="move",!1}function a(){this.classList.add("over")}function i(){this.classList.remove("over")}function c(t){if(t.stopPropagation&&t.stopPropagation(),n!==this){var e=t.dataTransfer.getData("text/html"),r=document.createElement("div");r.innerHTML=e.trim();var o=r.firstChild,a=this.getBoundingClientRect();t.clientY-a.top>a.height/2?this.after(o):this.before(o),n.remove(),u(o)}return this.classList.remove("over"),!1}function l(){this.classList.remove("over"),this.classList.remove("dragElem")}function u(t){t.addEventListener("dragstart",r),t.addEventListener("dragenter",a),t.addEventListener("dragover",o),t.addEventListener("dragleave",i),t.addEventListener("drop",c),t.addEventListener("dragend",l)}}function i(t){var e=t.sectionId,n=t.toggleButtonId,r=t.logElementId,o=t.endpoint;document.addEventListener("DOMContentLoaded",(function(){var t=document.body;if(document.getElementById(e)){var a=document.getElementById(n),i=document.getElementById(r);a&&i&&(a.addEventListener("click",(function(){var t=i.classList.contains("visible");i.classList.toggle("visible",!t),this.setAttribute("aria-expanded",!t)})),"true"===t.getAttribute("data-ajax-enabled")&&fetch("".concat(window.BASE_URL).concat(o),{cache:"no-store"}).then((function(t){return t.ok?t.text():Promise.reject()})).then((function(t){c(t),setInterval(l,3e3)})).catch((function(){})))}function c(t){var e=""===t.trim();i.innerHTML=e?'<code class="muted">No errors logged. You\'re doing great. 🎉</code>':"<code>".concat(t,"</code>")}function l(){fetch("".concat(window.BASE_URL).concat(o),{cache:"no-store"}).then((function(t){return t.ok?t.text():Promise.reject()})).then(c)}}))}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(){var t,e=(null===(t=document.querySelector(".search-bar"))||void 0===t?void 0:t.value.toLowerCase())||"";document.querySelectorAll(".folders li").forEach((function(t){var n=t.textContent.toLowerCase();t.style.display=n.includes(e)?"":"none"}))}function s(t){document.documentElement.className="","default"!==t&&document.documentElement.classList.add("".concat(t,"-theme")),document.body.classList.remove("light-mode"),"undefined"!=typeof themeTypes&&"light"===themeTypes[t]&&document.body.classList.add("light-mode")}function d(){document.querySelectorAll("[data-generate-cert]").forEach((function(t){t.addEventListener("click",(function(){var e=t.dataset.generateCert;confirm("Generate a new SSL certificate for "+e+"?")&&fetch("".concat(window.BASE_URL,"utils/generate_cert.php?name=").concat(encodeURIComponent(e))).then((function(t){return t.text()})).then((function(t){if(alert(t),t.includes("successfully")){var e=document.getElementById("restart-apache");e&&e.click()}})).catch((function(){return alert("Failed to run cert script.")}))}))}))}function f(){var t=document.getElementById("vhost-filter"),e=document.querySelectorAll("#vhosts-table tbody tr");t&&e.length&&t.addEventListener("change",(function(){var n=t.value,r=0;e.forEach((function(t){var e=t.classList.contains("vhost-ssl"),o=t.classList.contains("cert-valid"),a=t.classList.contains("host-valid"),i=!0;"missing-cert"===n?i=!o:"missing-host"===n?i=!a:"ssl-only"===n?i=e:"non-ssl"===n&&(i=!e),t.style.display=i?"":"none",i&&r++}));var o=document.getElementById("vhost-empty-msg");o&&(o.style.display=0===r?"":"none")}))}function m(){document.addEventListener("click",(function(t){if(t.target.matches(".open-folder")){var e=t.target.dataset.path.replace(/^"(.*)"$/,"$1");e&&fetch("".concat(window.BASE_URL,"utils/open_folder.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})})}}))}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */p=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(e,n,r,o){var a=n&&n.prototype instanceof f?n:f,i=Object.create(a.prototype);return l(i,"_invoke",function(e,n,r){var o=1;return function(a,i){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=w(c,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===o)throw o=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=3;var u=s(e,n,r);if("normal"===u.type){if(o=r.done?4:2,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=4,r.method="throw",r.arg=u.arg)}}}(e,r,new I(o||[])),!0),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d={};function f(){}function m(){}function v(){}var y={};l(y,a,(function(){return this}));var g=Object.getPrototypeOf,E=g&&g(g(A([])));E&&E!==n&&r.call(E,a)&&(y=E);var b=v.prototype=f.prototype=Object.create(y);function L(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,a,i,c){var l=s(t[o],t,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==h(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(d).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var o;l(this,"_invoke",(function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}),!0)}function w(e,n){var r=n.method,o=e.i[r];if(o===t)return n.delegate=null,"throw"===r&&e.i.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=s(o,e.i,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;var i=a.arg;return i?i.done?(n[e.r]=i.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function x(t){this.tryEntries.push(t)}function k(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function I(t){this.tryEntries=[[-1]],t.forEach(x,this),this.reset(!0)}function A(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(h(e)+" is not iterable")}return m.prototype=v,l(b,"constructor",v),l(v,"constructor",m),l(v,c,m.displayName="GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},L(S.prototype),l(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new S(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(b),l(b,c,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},e.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t){i.type="throw",i.arg=e,n.next=t}for(var o=n.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a[4],c=this.prev,l=a[1],u=a[2];if(-1===a[0])return r("end"),!1;if(!l&&!u)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=c){if(c<l)return this.method="next",this.arg=t,r(l),!0;if(c<u)return r(u),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var o=r;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var a=o?o[4]:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o[2],d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),k(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var o=r.arg;k(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={i:A(e),r:n,n:r},"next"===this.method&&(this.arg=t),d}},e}function v(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,o)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var E;document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("restart-apache-button");t&&t.addEventListener("click",(function(){return t="restart",void((e=document.getElementById("apache-status-message"))&&(e.innerText="Executing "+t+"...",fetch("".concat(window.BASE_URL,"utils/toggle_apache.php"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action="+encodeURIComponent(t)}).then((function(t){return t.text()})).then((function(t){try{var n=JSON.parse(t);e.innerText=n.message,"function"==typeof renderServerInfo&&renderServerInfo()}catch(n){console.error("Invalid JSON:",t),e.innerText="Error: Invalid server response"}})).catch((function(t){e.innerText="Error: "+t}))));var t,e}))})),document.addEventListener("DOMContentLoaded",(function(){t(),setInterval(t,1e3)})),E=["max-xs","max-sm","max-md","max-lg"],document.addEventListener("DOMContentLoaded",(function(){var t=localStorage.getItem("columnSize");t&&r(t);var e=document.getElementById("reset-width"),n=document.getElementById("prev-width"),a=document.getElementById("next-width");e&&e.addEventListener("click",(function(){return r("auto")})),n&&n.addEventListener("click",(function(){return o("prev",E)})),a&&a.addEventListener("click",(function(){return o("next",E)}))})),document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".columns");if(t){var n=null,r=JSON.parse(localStorage.getItem("columnOrder")||"[]");r.length&&r.forEach((function(e){var n=document.getElementById(e);n&&t.appendChild(n)})),t.querySelectorAll(".column:not(.column-controls)").forEach((function(r){var o=r.querySelector(".drag-handle");o&&(r.setAttribute("draggable",!1),o.addEventListener("mousedown",(function(){r.setAttribute("draggable",!0)})),o.addEventListener("mouseup",(function(){r.setAttribute("draggable",!1)})),r.addEventListener("dragstart",(function(){n=r,r.style.opacity="0.5"})),r.addEventListener("dragend",(function(){var e;n=null,r.style.opacity="1",r.setAttribute("draggable",!1),e=Array.from(t.children).filter((function(t){return!t.classList.contains("column-controls")})).map((function(t){return t.id})),localStorage.setItem("columnOrder",JSON.stringify(e))})),r.addEventListener("dragover",(function(t){return t.preventDefault()})),r.addEventListener("drop",(function(o){if(o.preventDefault(),n&&n!==r){var a=e(t.children),i=a.indexOf(r);a.indexOf(n)<i?r.after(n):r.before(n)}})))}))}})),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("dock-list"),e=document.getElementById("add-dock-item"),n=document.querySelector("#settings-view form");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement("li");n.className="dock-item",n.draggable=!0,n.innerHTML='\n                <input type="text" placeholder="Label" value="'.concat(e.label||"",'">\n                <input type="text" placeholder="URL" value="').concat(e.url||"",'">\n                <input type="text" placeholder="Icon" value="').concat(e.icon||"",'">\n                <input type="text" placeholder="Alt Text" value="').concat(e.alt||"",'">\n                <button type="button" class="remove-dock-item">❌</button>\n            '),t.appendChild(n),n.querySelector(".remove-dock-item").addEventListener("click",(function(){n.remove(),o()})),Array.from(n.querySelectorAll("input")).forEach((function(t){t.addEventListener("input",o)}))}function o(){var e=[];t.querySelectorAll(".dock-item").forEach((function(t){var n=t.querySelectorAll("input");e.push({label:n[0].value.trim(),url:n[1].value.trim(),icon:n[2].value.trim(),alt:n[3].value.trim()})}));var n=document.getElementById("dock_json_input");n&&(n.value=JSON.stringify(e,null,2))}t&&e&&n&&(fetch("".concat(window.BASE_URL,"config/dock.json"),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){t.forEach(r),a("#dock-list"),o()})),e.addEventListener("click",(function(){r(),a("#dock-list"),o()})))})),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("folders-config-list"),e=document.getElementById("add-folder-column"),n=document.getElementById("folders_json_input");if(t&&e&&n){var r=null,o=function(t,e){(r?Promise.resolve(r):fetch("".concat(window.BASE_URL,"config/link_templates.json"),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){return r=t,t}))).then((function(n){var r=!1;if(n.forEach((function(n){var o=document.createElement("option");o.value=n.name,o.textContent=n.name,n.name===e&&(o.selected=!0,r=!0),t.appendChild(o)})),!r&&e){var o=document.createElement("option");o.value=e,o.textContent=e,o.selected=!0,t.appendChild(o)}l()}))},i=function(){var e,n,r,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=document.createElement("li");u.className="folder-config-item",u.draggable=!0;var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(t).map((function(t){var e=c(t,2),n=e[0],r=e[1];return'\n\t\t\t\t\t<div class="special-case">\n\t\t\t\t\t\t<input type="text" class="case-key" placeholder="match" value="'.concat(n,'">\n\t\t\t\t\t\t<input type="text" class="case-val" placeholder="replacement" value="').concat(r,'">\n\t\t\t\t\t\t<button type="button" class="remove-special">❌</button>\n\t\t\t\t\t</div>\n\t\t\t\t')})).join("")}(i.specialCases);u.innerHTML='\n\t\t\t\t<input type="text" data-key="title" placeholder="Title" value="'.concat(i.title||"",'">\n\t\t\t\t<input type="text" data-key="href" placeholder="Href (optional)" value="').concat(i.href||"",'">\n\t\t\t\t<input type="text" data-key="dir" placeholder="Dir (relative to HTDOCS_PATH)" value="').concat(i.dir||"",'">\n\t\t\t\t<input type="text" data-key="excludeList" placeholder="Exclude List (comma-separated)" value="').concat((i.excludeList||[]).join(","),'">\n\t\t\t\t<input type="text" data-key="match" placeholder="Match Regex" value="').concat(null!==(e=null===(n=i.urlRules)||void 0===n?void 0:n.match)&&void 0!==e?e:"",'">\n\t\t\t\t<input type="text" data-key="replace" placeholder="Replace Regex" value="').concat(null!==(r=null===(a=i.urlRules)||void 0===a?void 0:a.replace)&&void 0!==r?r:"",'">\n\t\t\t\t<label>Link Template: <select class="link-template-select" name="linkTemplate"></select></label>\n\t\t\t\t<label><input type="checkbox" class="disable-links" ').concat(i.disableLinks?"checked":"",'> Disable Links</label>\n\t\t\t\t<div class="special-cases-wrapper">\n\t\t\t\t\t<label>Special Cases:</label>\n\t\t\t\t\t<div class="special-cases">').concat(s,'</div>\n\t\t\t\t\t<button type="button" class="add-special">➕ Add Rule</button>\n\t\t\t\t</div>\n\t\t\t\t<button type="button" class="remove-folder-column">❌</button>\n\t\t\t'),t.appendChild(u),u.querySelector('input[data-key="title"]').focus();var d=u.querySelector(".link-template-select");o(d,i.linkTemplate),u.querySelector(".remove-folder-column").addEventListener("click",(function(){u.remove(),l()})),u.querySelector(".add-special").addEventListener("click",(function(){var t=u.querySelector(".special-cases"),e=document.createElement("div");e.className="special-case",e.innerHTML='\n\t\t\t\t\t<input type="text" class="case-key" placeholder="match">\n\t\t\t\t\t<input type="text" class="case-val" placeholder="replacement">\n\t\t\t\t\t<button type="button" class="remove-special">❌</button>\n\t\t\t\t',t.appendChild(e)})),u.querySelector(".special-cases").addEventListener("click",(function(t){t.target.matches(".remove-special")&&(t.target.closest(".special-case").remove(),l())})),u.querySelectorAll("input, select").forEach((function(t){t.addEventListener("input",l),t.addEventListener("change",l)}))},l=function(){var e=[];t.querySelectorAll(".folder-config-item").forEach((function(t){var n,r,o=function(e){var n;return(null===(n=t.querySelector(e))||void 0===n?void 0:n.value.trim())||""},a={};t.querySelectorAll(".special-case").forEach((function(t){var e=t.querySelector(".case-key").value.trim(),n=t.querySelector(".case-val").value.trim();e&&(a[e]=n)})),e.push({title:o('input[data-key="title"]'),href:o('input[data-key="href"]'),dir:o('input[data-key="dir"]'),excludeList:o('input[data-key="excludeList"]').split(",").map((function(t){return t.trim()})).filter(Boolean),urlRules:{match:o('input[data-key="match"]'),replace:o('input[data-key="replace"]')},linkTemplate:(null===(n=t.querySelector(".link-template-select"))||void 0===n?void 0:n.value)||"",disableLinks:(null===(r=t.querySelector(".disable-links"))||void 0===r?void 0:r.checked)||!1,specialCases:a})})),n.value=JSON.stringify(e,null,2)};fetch("".concat(window.BASE_URL,"config/folders.json"),{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){t.forEach((function(t){return i(t)})),a("#folders-config-list")})),e.addEventListener("click",(function(){i(),l()}))}})),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("link-templates-list"),e=document.getElementById("add-link-template");function n(){var e=[];t.querySelectorAll(".template-item").forEach((function(t){var n,r,o=null===(n=t.querySelector(".template-name"))||void 0===n?void 0:n.value.trim(),a=null===(r=t.querySelector(".template-html"))||void 0===r?void 0:r.value.trim();o&&a&&e.push({name:o,html:a})}));var n=document.getElementById("link_templates_json_input");n&&(n.value=JSON.stringify(e,null,2))}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=document.createElement("li");r.className="template-item",r.innerHTML='\n        <input type="text" class="template-name" placeholder="Template Name" value="'.concat(e.name||"",'">\n        <input type="text" class="template-html" placeholder="HTML Template" value="').concat(e.html||"",'">\n        <button type="button" class="remove-template">❌</button>\n      '),r.querySelector(".remove-template").addEventListener("click",(function(){r.remove(),n()})),Array.from(r.querySelectorAll("input")).forEach((function(t){t.addEventListener("input",n)})),t.appendChild(r),n()}t&&e&&(e.addEventListener("click",(function(){return r()})),t.innerHTML="",fetch("config/link_templates.json",{cache:"no-store"}).then((function(t){return t.json()})).then((function(t){t.forEach(r),n()})))})),i({sectionId:"apache-error-log-section",toggleButtonId:"toggle-apache-error-log",logElementId:"apache-error-log",endpoint:"utils/apache_error_log.php"}),i({sectionId:"php-error-log-section",toggleButtonId:"toggle-php-error-log",logElementId:"php-error-log",endpoint:"utils/php_error_log.php"}),document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".search-bar");t&&t.addEventListener("input",u)})),document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("clear-local-storage");t&&t.addEventListener("click",(function(){if(confirm("Are you sure you want to reset saved UI settings?")){var t=["theme","columnOrder","columnSize"];Object.keys(localStorage).forEach((function(e){t.some((function(t){return e.startsWith(t)}))&&localStorage.removeItem(e)})),alert("Saved settings have been cleared from local storage."),location.reload()}}))})),document.addEventListener("DOMContentLoaded",(function(){var t=document.body;if(document.getElementById("system-monitor")&&"true"===t.getAttribute("data-ajax-enabled")){var e=document.getElementById("cpu-load"),n=document.getElementById("memory-usage"),r=document.getElementById("disk-space");fetch("".concat(window.BASE_URL,"utils/system_stats.php"),{cache:"no-store"}).then((function(t){if(t.ok)return t.json()})).then((function(t){e.textContent="".concat(t.cpu,"%"),n.textContent="".concat(t.memory," MB"),r.textContent="".concat(t.disk,"%"),setInterval(o,1e3),o()})).catch((function(){}))}function o(){fetch("".concat(window.BASE_URL,"utils/system_stats.php"),{cache:"no-store"}).then((function(t){if(!t.ok)throw new Error("System stats unavailable");return t.json()})).then((function(t){e.textContent="".concat(t.cpu,"%"),n.textContent="".concat(t.memory," MB"),r.textContent="".concat(t.disk,"%")}))}})),document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("#theme-selector");if(t){var e=localStorage.getItem("theme")||serverTheme||"default";s(e),t.value=e,t.addEventListener("change",(function(t){var e=t.target.value;s(e),localStorage.setItem("theme",e)}))}})),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){d(),f(),m()})):(d(),f(),m()),document.addEventListener("DOMContentLoaded",(function(){var t={index:document.getElementById("folders-view"),settings:document.getElementById("settings-view"),phpinfo:document.getElementById("phpinfo-view"),apache:document.getElementById("apache-view"),mysql:document.getElementById("mysql-view")};Object.entries({"toggle-index":"index","toggle-settings":"settings","toggle-phpinfo":"phpinfo"}).forEach((function(e){var n=y(e,2),r=n[0],o=n[1],a=document.getElementById(r);a&&a.addEventListener("click",(function(e){e.preventDefault(),Object.entries(t).forEach((function(t){var e=y(t,2),n=e[0],r=e[1];r&&r.classList.toggle("visible",n===o)}))}))})),Object.entries({"toggle-apache-inspector":{targetKey:"apache",url:"utils/apache_inspector.php"},"toggle-mysql-inspector":{targetKey:"mysql",url:"utils/mysql_inspector.php"}}).forEach((function(e){var n=y(e,2),r=n[0],o=n[1],a=o.targetKey,i=o.url,c=document.getElementById(r),l=t[a];c&&l&&c.addEventListener("click",function(){var e,n=(e=p().mark((function e(n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),Object.values(t).forEach((function(t){t&&t.classList.remove("visible")})),l.classList.add("visible"),l.dataset.loaded){e.next=19;break}return l.innerHTML='<div class="loader"><span class="spinner" role="img" aria-label="Loading"></span></div>',e.prev=5,e.next=8,fetch("".concat(window.BASE_URL||"/").concat(i));case 8:return r=e.sent,e.next=11,r.text();case 11:l.innerHTML=e.sent,l.dataset.loaded="true",e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),l.innerHTML='<p class="error">Failed to load '+i+"</p>",console.error("[view.js] Failed to fetch ".concat(i),e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(t){v(a,r,o,i,c,"next",t)}function c(t){v(a,r,o,i,c,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}())}))}))})();
//# sourceMappingURL=script.min.js.map