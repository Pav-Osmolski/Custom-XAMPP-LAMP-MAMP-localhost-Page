(()=>{"use strict";function e(){var e=document.querySelector(".clock");if(e){var t=new Date;e.textContent=t.toLocaleTimeString()}}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e){localStorage.setItem("columnSize",e);var t=document.querySelector(".columns");t&&(t.classList.forEach((function(e){e.startsWith("max-")&&t.classList.remove(e)})),"auto"!==e&&t.classList.add(e))}function o(e,t){var n=localStorage.getItem("columnSize"),o=t.indexOf(n);-1===o&&(o="next"===e?-1:0),"next"===e&&o<t.length-1?o+=1:"prev"===e&&o>0&&(o-=1),r(t[o])}function a(e){var t=document.querySelector(e);if(t){var n=null;Array.from(t.children).forEach(u)}function r(e){n=this,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.outerHTML),this.classList.add("dragElem")}function o(e){return e.preventDefault&&e.preventDefault(),this.classList.add("over"),e.dataTransfer.dropEffect="move",!1}function a(){this.classList.add("over")}function c(){this.classList.remove("over")}function l(e){if(e.stopPropagation&&e.stopPropagation(),n!==this){var t=e.dataTransfer.getData("text/html"),r=document.createElement("div");r.innerHTML=t.trim();var o=r.firstChild,a=this.getBoundingClientRect();e.clientY-a.top>a.height/2?this.after(o):this.before(o),n.remove(),u(o)}return this.classList.remove("over"),!1}function i(){this.classList.remove("over"),this.classList.remove("dragElem")}function u(e){e.addEventListener("dragstart",r),e.addEventListener("dragenter",a),e.addEventListener("dragover",o),e.addEventListener("dragleave",c),e.addEventListener("drop",l),e.addEventListener("dragend",i)}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,l=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(){var e,t=(null===(e=document.querySelector(".search-bar"))||void 0===e?void 0:e.value.toLowerCase())||"";document.querySelectorAll(".folders li").forEach((function(e){var n=e.textContent.toLowerCase();e.style.display=n.includes(t)?"":"none"}))}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,c,l=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s;document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("restart-apache-button");e&&e.addEventListener("click",(function(){return e="restart",void((t=document.getElementById("apache-status-message"))&&(t.innerText="Executing "+e+"...",fetch("ajax_toggle_apache.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"action="+encodeURIComponent(e)}).then((function(e){return e.text()})).then((function(e){try{var n=JSON.parse(e);t.innerText=n.message,"function"==typeof renderServerInfo&&renderServerInfo()}catch(n){console.error("Invalid JSON:",e),t.innerText="Error: Invalid server response"}})).catch((function(e){t.innerText="Error: "+e}))));var e,t}))})),document.addEventListener("DOMContentLoaded",(function(){e(),setInterval(e,1e3)})),s=["max-xs","max-sm","max-md","max-lg"],document.addEventListener("DOMContentLoaded",(function(){var e=localStorage.getItem("columnSize");e&&r(e);var t=document.getElementById("reset-width"),n=document.getElementById("prev-width"),a=document.getElementById("next-width");t&&t.addEventListener("click",(function(){return r("auto")})),n&&n.addEventListener("click",(function(){return o("prev",s)})),a&&a.addEventListener("click",(function(){return o("next",s)}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".columns");if(e){var n=null,r=JSON.parse(localStorage.getItem("columnOrder")||"[]");r.length&&r.forEach((function(t){var n=document.getElementById(t);n&&e.appendChild(n)})),e.querySelectorAll(".column:not(.column-controls)").forEach((function(r){var o=r.querySelector(".drag-handle");o&&(r.setAttribute("draggable",!1),o.addEventListener("mousedown",(function(){r.setAttribute("draggable",!0)})),o.addEventListener("mouseup",(function(){r.setAttribute("draggable",!1)})),r.addEventListener("dragstart",(function(){n=r,r.style.opacity="0.5"})),r.addEventListener("dragend",(function(){var t;n=null,r.style.opacity="1",r.setAttribute("draggable",!1),t=Array.from(e.children).filter((function(e){return!e.classList.contains("column-controls")})).map((function(e){return e.id})),localStorage.setItem("columnOrder",JSON.stringify(t))})),r.addEventListener("dragover",(function(e){return e.preventDefault()})),r.addEventListener("drop",(function(o){if(o.preventDefault(),n&&n!==r){var a=t(e.children),c=a.indexOf(r);a.indexOf(n)<c?r.after(n):r.before(n)}})))}))}})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("dock-list"),t=document.getElementById("add-dock-item"),n=document.querySelector("#settings-view form");function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.createElement("li");n.className="dock-item",n.draggable=!0,n.innerHTML='\n                <input type="text" placeholder="Label" value="'.concat(t.label||"",'">\n                <input type="text" placeholder="URL" value="').concat(t.url||"",'">\n                <input type="text" placeholder="Icon" value="').concat(t.icon||"",'">\n                <button type="button" class="remove-dock-item">❌</button>\n            '),e.appendChild(n),n.querySelector(".remove-dock-item").addEventListener("click",(function(){n.remove(),o()})),Array.from(n.querySelectorAll("input")).forEach((function(e){e.addEventListener("input",o)}))}function o(){var t=[];e.querySelectorAll(".dock-item").forEach((function(e){var n=e.querySelectorAll("input");t.push({label:n[0].value.trim(),url:n[1].value.trim(),icon:n[2].value.trim()})}));var n=document.getElementById("dock_json_input");n&&(n.value=JSON.stringify(t,null,2))}e&&t&&n&&(fetch("partials/dock.json").then((function(e){return e.json()})).then((function(e){e.forEach(r),a("#dock-list"),o()})),t.addEventListener("click",(function(){r(),a("#dock-list"),o()})))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("folders-config-list"),t=document.getElementById("add-folder-column"),n=document.getElementById("folders_json_input");function r(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=document.createElement("li");a.className="folder-config-item",a.draggable=!0;var l=r.specialCases||{},i=Object.entries(l).map((function(e){var t=c(e,2),n=t[0],r=t[1];return'\n                    <div class="special-case">\n                        <input type="text" class="case-key" placeholder="match" value="'.concat(n,'">\n                        <input type="text" class="case-val" placeholder="replacement" value="').concat(r,'">\n                        <button type="button" class="remove-special">❌</button>\n                    </div>\n                ')})).join("");a.innerHTML='\n                <input type="text" placeholder="Title" value="'.concat(r.title||"",'">\n                <input type="text" placeholder="Href (optional)" value="').concat(r.href||"",'">\n                <input type="text" placeholder="Dir (relative to HTDOCS_PATH)" value="').concat(r.dir||"",'">\n                <input type="text" placeholder="Exclude List (comma-separated)" value="').concat((r.excludeList||[]).join(","),'">\n                <input type="text" placeholder="Match Regex" value="').concat((null===(t=r.urlRules)||void 0===t?void 0:t.match)||"",'">\n                <input type="text" placeholder="Replace Regex" value="').concat((null===(n=r.urlRules)||void 0===n?void 0:n.replace)||"",'">\n                <label>Link Template:\n                  <select>\n                    <option value="basic" ').concat("basic"===r.linkTemplate?"selected":"",'>basic</option>\n                    <option value="env-links" ').concat("env-links"===r.linkTemplate?"selected":"",'>env-links</option>\n                    <option value="pantheon" ').concat("pantheon"===r.linkTemplate?"selected":"",'>pantheon</option>\n                  </select>\n                </label>\n                <label><input type="checkbox" class="disable-links" ').concat(r.disableLinks?"checked":"",'> Disable Links</label>\n                <div class="special-cases-wrapper">\n                  <label>Special Cases:</label>\n                  <div class="special-cases">').concat(i,'</div>\n                  <button type="button" class="add-special">➕ Add Rule</button>\n                </div>\n                <button type="button" class="remove-folder-column">❌</button>\n            '),e.appendChild(a),a.querySelector(".remove-folder-column").addEventListener("click",(function(){a.remove(),o()})),a.querySelector(".add-special").addEventListener("click",(function(){var e=a.querySelector(".special-cases"),t=document.createElement("div");t.className="special-case",t.innerHTML='\n                    <input type="text" class="case-key" placeholder="match">\n                    <input type="text" class="case-val" placeholder="replacement">\n                    <button type="button" class="remove-special">❌</button>\n                ',e.appendChild(t),t.querySelector(".remove-special").addEventListener("click",(function(){t.remove(),o()}))})),a.querySelectorAll(".remove-special").forEach((function(e){return e.addEventListener("click",(function(e){e.target.closest(".special-case").remove(),o()}))})),Array.from(a.querySelectorAll("input, select")).forEach((function(e){e.addEventListener("input",o),e.addEventListener("change",o)}))}function o(){var t=[];e.querySelectorAll(".folder-config-item").forEach((function(e){var n,r=e.querySelectorAll("input"),o=e.querySelectorAll("select"),a=e.querySelectorAll(".special-case"),c={};a.forEach((function(e){var t=e.querySelector(".case-key").value.trim(),n=e.querySelector(".case-val").value.trim();t&&(c[t]=n)}));var l=(null===(n=e.querySelector(".disable-links"))||void 0===n?void 0:n.checked)||!1;t.push({title:r[0].value.trim(),href:r[1].value.trim(),dir:r[2].value.trim(),excludeList:r[3].value.split(",").map((function(e){return e.trim()})).filter(Boolean),urlRules:{match:r[4].value.trim(),replace:r[5].value.trim()},linkTemplate:o[0].value,disableLinks:l,specialCases:c})})),n.value=JSON.stringify(t,null,2)}e&&t&&n&&(fetch("partials/folders.json").then((function(e){return e.json()})).then((function(e){e.forEach((function(e){return r(e)})),o(),a("#folders-config-list")})),t.addEventListener("click",(function(){r(),o()})))})),document.addEventListener("DOMContentLoaded",(function(){var e="true"===document.body.getAttribute("data-ajax-enabled");if(document.getElementById("error-log-section")){var t=function(){fetch(e?"ajax_apache_error_log.php":"apache_error_log.php",{cache:"no-store"}).then((function(e){if(!e.ok)throw new Error("Error log unavailable");return e.text()})).then((function(e){r.innerHTML="<code>".concat(e,"</code>")})).catch((function(e){console.error("Error fetching error log:",e),clearInterval(o)}))},n=document.getElementById("toggle-error-log"),r=document.getElementById("error-log");n.addEventListener("click",(function(){var e="block"===r.style.display;r.style.display=e?"none":"block",this.setAttribute("aria-expanded",!e)}));var o=setInterval(t,3e3);t()}})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".search-bar");e&&e.addEventListener("input",i)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.body,t=document.getElementById("system-monitor"),n="true"===e.getAttribute("data-ajax-enabled");if(t){var r=function(){fetch(n?"ajax_system_stats.php":"system_stats.php",{cache:"no-store"}).then((function(e){if(!e.ok)throw new Error("System stats unavailable");return e.json()})).then((function(e){o.textContent="".concat(e.cpu,"%"),a.textContent="".concat(e.memory," MB"),c.textContent="".concat(e.disk,"%")})).catch((function(e){console.error("Error fetching system stats:",e),clearInterval(l)}))},o=document.getElementById("cpu-load"),a=document.getElementById("memory-usage"),c=document.getElementById("disk-space"),l=setInterval(r,1e3);r()}})),document.addEventListener("DOMContentLoaded",(function(){"light"===localStorage.getItem("theme")&&(document.documentElement.classList.add("light-mode"),document.body.classList.add("light-mode"));var e=document.querySelector(".toggle-theme");e&&e.addEventListener("click",(function(){document.documentElement.classList.toggle("light-mode"),document.body.classList.toggle("light-mode");var e=document.documentElement.classList.contains("light-mode");localStorage.setItem("theme",e?"light":"dark")}))})),document.addEventListener("DOMContentLoaded",(function(){var e={index:document.getElementById("folders-view"),settings:document.getElementById("settings-view"),phpinfo:document.getElementById("phpinfo-view")};Object.entries({"toggle-index":"index","toggle-settings":"settings","toggle-phpinfo":"phpinfo"}).forEach((function(t){var n=u(t,2),r=n[0],o=n[1],a=document.getElementById(r);a&&a.addEventListener("click",(function(t){t.preventDefault(),Object.entries(e).forEach((function(e){var t=u(e,2),n=t[0],r=t[1];r&&(r.style.display=n===o?"block":"none")}))}))}))}))})();
//# sourceMappingURL=script.min.js.map