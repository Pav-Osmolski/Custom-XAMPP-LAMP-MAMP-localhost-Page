{"version":3,"file":"js/script.min.js","mappings":"mBAQO,SAASA,IACf,IAAMC,EAAQC,SAASC,cAAe,UACtC,GAAKF,EAAQ,CACZ,IAAMG,EAAM,IAAIC,KAChBJ,EAAMK,YAAcF,EAAIG,mBAAoB,GAAI,CAC/CC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,QAAQ,GAEV,CACD,CCSAT,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMC,EAAMX,SAASY,eAAgB,yBAChCD,GACJA,EAAID,iBAAkB,QAAS,kBA9BHG,EA8BuB,gBA7B9CC,EAAad,SAASY,eAAgB,4BAE5CE,EAAWC,UAAY,aAAeF,EAAS,MAC/CG,MAAM,GAADC,OAAMC,OAAOC,SAAQ,2BAA4B,CACrDC,OAAQ,OACRC,QAAS,CAAC,eAAgB,qCAC1BC,KAAM,UAAYC,mBAAoBV,KAErCW,KAAM,SAAAC,GAAQ,OAAIA,EAASC,MAAM,GACjCF,KAAM,SAAAE,GACN,IACC,IAAMC,EAAOC,KAAKC,MAAOH,GACzBZ,EAAWC,UAAYY,EAAKG,QACK,mBAArBC,kBACXA,kBAEF,CAAE,MAAQC,GACTC,QAAQC,MAAO,gBAAiBR,GAChCZ,EAAWC,UAAY,gCACxB,CACD,GAAG,MACK,SAAAmB,GACPpB,EAAWC,UAAY,UAAYmB,CACpC,KAxBK,IAAuBrB,EACvBC,CA6ByD,EAEhE,GChCA,IAAMqB,EAAoB,IAAIC,QAEvB,SAASC,EAAgBC,GAA0B,IAAAC,EAAZC,EAAIC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC/CG,EAAO5C,SAASC,cAAeqC,GACrC,GAAMM,IAEDT,EAAkBU,IAAKD,GAA5B,CACAT,EAAkBW,IAAKF,GAEvB,IAAMG,EAAgBP,EAAKQ,OAAS,KAC9BC,EAAiBT,EAAKU,QAAU,KAGhCC,EAAsBX,EAAKW,qBAAuB,kEAClDC,EAAoBZ,EAAKY,mBAAqB,oBAC9CC,EAAoD,QAA9Bd,EAAGC,EAAKa,8BAAsB,IAAAd,GAAAA,EAEtDe,EAAY,KACZC,GAAW,EAMfX,EAAKlC,iBAAkB,cAAe,SAAEsB,GACvC,IAAMwB,EAAOxB,EAAEyB,OAAOC,QAASX,GAC/B,GAAMS,GAASZ,EAAKe,SAAUH,GAA9B,CAEA,IAAMI,GAAcX,KAAmBjB,EAAEyB,OAAOC,QAAST,GACzD,IAAKA,GAAmBW,EAAxB,CAKA,KAHsC5B,EAAEyB,OAV5BC,QAASP,GAgBpB,KADgBE,GAA0BO,GAAe5B,EAAEyB,OAAOC,QAASN,IAC3D,OAGjBI,EAAKK,WAAY,CAX2B,CAHC,CAe9C,EAAG,CAACC,SAAS,IAEblB,EAAKlC,iBAAkB,YAAa,SAAEsB,GACrC,IAAMwB,EAAOxB,EAAEyB,OAAOC,QAASX,GAC/B,GAAMS,GAASZ,EAAKe,SAAUH,GAA9B,CACAF,EAAYE,EACZD,GAAW,EAEXvB,EAAE+B,aAAaC,cAAgB,OAC/B,IACChC,EAAE+B,aAAaE,QAAS,aAAc,GACvC,CAAE,MAAQC,GACV,CACAV,EAAKW,UAAUrB,IAAK,WATyB,CAU9C,GAEAF,EAAKlC,iBAAkB,YAAa,SAAEsB,GACrC,IAAMwB,EAAOxB,EAAEyB,OAAOC,QAASX,GACzBS,GAASZ,EAAKe,SAAUH,IAC9BA,EAAKW,UAAUrB,IAAK,OACrB,GAEAF,EAAKlC,iBAAkB,WAAY,SAAEsB,GAC/BsB,GAAYtB,EAAEoC,gBACpB,GAEAxB,EAAKlC,iBAAkB,YAAa,SAAEsB,GACrC,IAAMwB,EAAOxB,EAAEyB,OAAOC,QAASX,GAC1BS,GAAQZ,EAAKe,SAAUH,IAASA,EAAKW,UAAUE,OAAQ,OAC7D,GAEAzB,EAAKlC,iBAAkB,OAAQ,SAAEsB,GAChCA,EAAEoC,iBACF,IAAMX,EAASzB,EAAEyB,OAAOC,QAASX,GACjC,GAAMU,GAAWH,GAAaG,IAAWH,EAAzC,CAEA,IAAMgB,EAAWC,MAAMC,KAAM5B,EAAK6B,iBAAiB,YAADxD,OAAe8B,KAC3DyB,EAAOF,EAASI,QAASpB,GACzBqB,EAAKL,EAASI,QAASjB,GAExBe,GAAQ,GAAKG,GAAM,IAClBH,EAAOG,EAAKlB,EAAOmB,MAAOtB,GAC1BG,EAAOoB,OAAQvB,GACpBV,EAAKkC,cAAe,IAAIC,YAAa,SAAU,CAACC,SAAS,MAE1DvB,EAAOU,UAAUE,OAAQ,OAXkC,CAY5D,GAEAzB,EAAKlC,iBAAkB,UAAW,SAAEsB,GACnC,IAAMwB,EAAOxB,EAAEyB,OAAOC,QAASX,GAC1BS,GAAQZ,EAAKe,SAAUH,KAC3BA,EAAKW,UAAUE,OAAQ,YACvBb,EAAKK,WAAY,GAElBU,MAAMC,KAAM5B,EAAK6B,iBAAkB1B,IAAkBkC,QAAS,SAAAC,GAAE,OAAIA,EAAGf,UAAUE,OAAQ,OAAQ,GACjGf,EAAY,KACZC,GAAW,CACZ,GAGAX,EAAKlC,iBAAkB,QAAS,SAAEsB,GAC3BuB,GACDN,GAAkBjB,EAAEyB,OAAOC,QAAST,IAAmBjB,EAAEoC,gBAC/D,GAAG,EAlGwC,CAmG5C,CCvGO,SAASe,EAAgBC,GAC/BC,aAAaC,QAAS,aAAcF,GACpC,IAAMG,EAAavF,SAASC,cAAe,YACrCsF,IAENA,EAAWpB,UAAUc,QAAS,SAAEO,GAC1BA,EAAIC,WAAY,SACpBF,EAAWpB,UAAUE,OAAQmB,EAE/B,GAEc,SAATJ,GACJG,EAAWpB,UAAUrB,IAAKsC,GAE5B,CAEO,SAASM,EAAkBC,EAAWC,GAC5C,IAAMC,EAAUR,aAAaS,QAAS,eAAkB,OAClDC,EAAMH,EAAMlB,QAASmB,GACvBG,EAAU,EAEK,SAAdL,EACJK,GAAWD,EAAM,GAAKH,EAAMlD,OACH,SAAdiD,IACXK,GAAWD,EAAM,EAAIH,EAAMlD,QAAUkD,EAAMlD,QAG5CyC,EAAgBS,EAAMI,GACvB,CC9BA,SAASC,EAAmBC,GAKM,IAJHC,EAASD,EAATC,UACAC,EAAcF,EAAdE,eACAC,EAAYH,EAAZG,aACAC,EAAQJ,EAARI,SAE9BtG,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMY,EAAOtB,SAASsB,KAEtB,GADmBtB,SAASY,eAAgBuF,GAC5C,CAEA,IAAMI,EAAYvG,SAASY,eAAgBwF,GACrCI,EAAaxG,SAASY,eAAgByF,GAEtCE,GAAcC,IAEpBD,EAAU7F,iBAAkB,QAAS,WACpC,IAAM+F,EAAYD,EAAWrC,UAAUR,SAAU,WACjD6C,EAAWrC,UAAUuC,OAAQ,WAAYD,GACzCE,KAAKC,aAAc,iBAAkBH,EACtC,GAEkD,SAA7CnF,EAAKuF,aAAc,sBAexB7F,MAAM,GAADC,OAAMC,OAAOC,UAAQF,OAAKqF,GAAa,CAACQ,MAAO,aAClDtF,KAAM,SAAAuF,GAAG,OAAIA,EAAIC,GAAKD,EAAIrF,OAASuF,QAAQC,QAAQ,GACnD1F,KAAM,SAAAG,GACNwF,EAAmBxF,GACnByF,YAAaC,EAAU,IACxB,GAAG,MACK,WACR,GAnCwB,CAezB,SAASF,EAAmBxF,GAC3B,IAAM2F,EAA0B,KAAhB3F,EAAK4F,OACrBf,EAAWgB,UAAYF,EAAO,gFAAArG,OAEjBU,EAAI,UAClB,CAEA,SAAS0F,IACRrG,MAAM,GAADC,OAAMC,OAAOC,UAAQF,OAAKqF,GAAa,CAACQ,MAAO,aAClDtF,KAAM,SAAAuF,GAAG,OAAIA,EAAIC,GAAKD,EAAIrF,OAASuF,QAAQC,QAAQ,GACnD1F,KAAM2F,EACT,CAUD,EACD,CCtCA,SAASM,IACR,IAAMC,EAAU1H,SAASY,eAAgB,gBACnC+G,EAAW3H,SAASY,eAAgB,iBACpCgH,EAAiB5H,SAASY,eAAgB,oBAE1CiH,EAAY7H,SAASY,eAAgB,qBACrCkH,EAAc9H,SAASY,eAAgB,uBAEvCmH,EAAS/H,SAASY,eAAgB,kBAClCoH,EAAWhI,SAASY,eAAgB,aACpCqH,EAAWjI,SAASY,eAAgB,oBAE1C,GAAM8G,GAAYC,EAAlB,CAEA,IAAIO,EAAS,GAwDbC,IAEAnH,MAAM,GAADC,OAAMC,OAAOC,SAAQ,mCAAoC,CAACiH,YAAa,gBAC1E5G,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GACnB9G,KAAM,SAAAG,GACN,IAAMA,EAAKqF,GACV,MAAM,IAAIuB,MAAO5G,EAAKO,OAAS,0BAKhC,IAFAgG,EAASvG,EAAKuG,QAAU,IAEXxF,QAlDf,SAAuB8F,EAAU7G,GAChC6G,EAAShB,UAAY,GACrB7F,EAAKsD,QAAS,SAAEwD,GACf,IAAMC,EAAM1I,SAAS2I,cAAe,UACpCD,EAAIE,MAAQC,OAAQJ,EAAEK,OACtBJ,EAAItI,YAAcqI,EAAEM,MACpBP,EAASQ,YAAaN,EACvB,EACD,CA8DEO,CAAcvB,EAASQ,GAClBR,EAAQwB,QAAQxG,QACpBgF,EAAQ5C,cAAe,IAAIqE,MAAO,eAtBnC,CAECzB,EAAQF,UAAY,+CACpBE,EAAQ0B,UAAW,EAEnBzB,EAASH,UAAY,0CACrBG,EAASyB,UAAW,EAEpB,IAAMtB,EAAc9H,SAASY,eAAgB,uBACxCkH,IACJA,EAAYN,UAAY,+FAIzB,IAAMI,EAAiB5H,SAASY,eAAgB,oBAC3CgH,IAAiBA,EAAeyB,MAAMC,QAAU,OAGtD,CAMD,GAAG,MACK,SAAAC,GACPtH,QAAQC,MAAOqH,GACf7B,EAAQF,UAAY,iDACpBE,EAAQ0B,UAAW,EACnBzB,EAASH,UAAY,8BACrBG,EAASyB,UAAW,CACrB,GAEDpI,MAAM,GAADC,OAAMC,OAAOC,SAAQ,kCAAmC,CAACiH,YAAa,gBACzE5G,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GACnB9G,KAAM,SAAAG,GACN,IAAMA,EAAKqF,GACV,MAAM,IAAIuB,MAAO5G,EAAKO,OAAS,4BA/DlC,IAA0BsG,EAAUgB,EAAVhB,EAiEPR,EAjEiBwB,EAiEP7H,EAAK8H,WAAa,GAhE9CjB,EAAShB,UAAY,GACfgC,EAAI9G,OAIV8G,EAAIvE,QAAS,SAAAyE,GACZ,IAAMhB,EAAM1I,SAAS2I,cAAe,UACpCD,EAAIE,MAAQc,EACZhB,EAAItI,YAAcsJ,EAClBlB,EAASQ,YAAaN,EACvB,GARCF,EAAShB,UAAY,8CA+DtB,GAAG,MACK,SAAA+B,GACPtH,QAAQC,MAAOqH,GACfvB,EAASR,UAAY,mDACtB,GAGDE,EAAQhH,iBAAkB,SAAU,WACnC,IAAMqF,EAAM4D,SAAUjC,EAAQkB,MAAO,IAC/BgB,EAAQC,OAAOC,MAAO/D,GAAQ,KAAOmC,EAAOnC,GAGlD4B,EAASyB,UAAW,EACpBzB,EAASH,UAAY,kDACrBI,EAAeyB,MAAMC,QAAU,OAE/B,IAhGuBd,EAAUuB,EAgG3BC,EAAMhK,SAASC,cAAe,+CAC/B+J,IAAMA,EAAIC,SAAU,GAEnBL,KAnGiBpB,EAqGRb,EArGkBoC,EAqGRH,EAAMG,WApG/BvB,EAAShB,UAAY,GACfuC,EAAWrH,OAIjBqH,EAAW9E,QAAS,SAAAiF,GACnB,IAAMxB,EAAM1I,SAAS2I,cAAe,UACpCD,EAAIE,MAAQsB,EAAGR,KACfhB,EAAItI,YAAc8J,EAAGR,KACrBlB,EAASQ,YAAaN,EACvB,GARCF,EAAShB,UAAY,gDAmGtBG,EAASyB,SAAwC,IAA5BQ,EAAMG,WAAWrH,OAGjCkH,EAAMG,WAAWrH,OAAS,IAC9BiF,EAASwC,cAAgB,EACzBxC,EAAS7C,cAAe,IAAIqE,MAAO,YAErC,GAEAxB,EAASjH,iBAAkB,SAAU,WACpC,IAAM0J,EAAOT,SAAUjC,EAAQkB,MAAO,IAChCgB,EAAQ1B,EAAOkC,GACrB,GAAMR,EAAN,CACA,IAAMM,EAAKN,EAAMG,WAAWM,KAAM,SAAAC,GAAC,OAAIA,EAAEZ,OAAS/B,EAASiB,KAAK,GAC1D2B,KAAiBL,GAAMA,EAAGM,aAAeN,EAAGO,YAElD7C,EAAeyB,MAAMC,QAAUiB,EAAc,GAAK,OAElD,IAAMP,EAAMhK,SAASC,cAAe,8CAC/B+J,IAAMA,EAAIC,SAAU,EAPL,CAQrB,GAEApC,EAAUnH,iBAAkB,SAAU,SAAAsB,GACrCA,EAAEoC,iBACF0D,EAAY1H,YAAc,qBAE1B,IAAMsK,EAAO,IAAIC,SAAU9C,GAC3B6C,EAAKE,OAAQ,SAAU,OAEvB5J,MAAM,GAADC,OAAMC,OAAOC,SAAQ,uBAAwB,CACjDC,OAAQ,OACRE,KAAMoJ,EACNtC,YAAa,gBAEZ5G,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GACnB9G,KAAM,SAAAG,GACN,IAAMA,EAAKqF,GACV,MAAM,IAAIuB,MAAO5G,EAAKO,OAAS,iBAIhC,OAFA4F,EAAYN,UAAY,kBAAHvG,OAAsBC,OAAOC,UAAQF,OAAKU,EAAKkJ,KAAI,gBAAA5J,OAAiBU,EAAK+H,KAAI,MAAAzI,OAAOU,EAAK+H,KAAI,QAClHxI,OAAO4J,SAASD,KAAO,GAAH5J,OAAOC,OAAOC,UAAQF,OAAKU,EAAKkJ,MAC7C1C,GACR,GAAG,MACK,SAAAoB,GAGP,OAFAtH,QAAQC,MAAOqH,GACfzB,EAAY1H,YAAc,UAAYmJ,EAAIzH,QACnCqG,GACR,EACF,GAEAJ,EAAOrH,iBAAkB,SAAU,SAAAsB,GAClCA,EAAEoC,iBACF6D,EAAS7H,YAAc,oBAEvB,IAAMsK,EAAO,IAAIC,SAAU5C,GAC3B2C,EAAKE,OAAQ,SAAU,UAEvB5J,MAAM,GAADC,OAAMC,OAAOC,SAAQ,uBAAwB,CACjDC,OAAQ,OACRE,KAAMoJ,EACNtC,YAAa,gBAEZ5G,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GACnB9G,KAAM,SAAAG,GACN,IAAMA,EAAKqF,GACV,MAAM,IAAIuB,MAAO5G,EAAKO,OAAS,oBAIhC,OAFA+F,EAAST,UAAY,kBAAHvG,OAAsBC,OAAOC,UAAQF,OAAKU,EAAKkJ,KAAI,gBAAA5J,OAAiBU,EAAK+H,KAAI,MAAAzI,OAAOU,EAAK+H,KAAI,QAC/GxI,OAAO4J,SAASD,KAAO,GAAH5J,OAAOC,OAAOC,UAAQF,OAAKU,EAAKkJ,MAC7C1C,GACR,GAAG,MACK,SAAAoB,GAGP,OAFAtH,QAAQC,MAAOqH,GACftB,EAAS7H,YAAc,UAAYmJ,EAAIzH,QAChCqG,GACR,EACF,EA/MmC,CAKnC,SAASA,IACR,OAAOnH,MAAM,GAADC,OAAMC,OAAOC,SAAQ,oCAAqC,CAACiH,YAAa,gBAClF5G,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GACnB9G,KAAM,SAAAuJ,GACDA,EAAE/D,IAAM+D,EAAEC,OACdhL,SAASyE,iBAAkB,sBAAuBQ,QAAS,SAAAC,GAC1DA,EAAG0D,MAAQmC,EAAEC,KACd,EAEF,GAAG,MACK,WACR,EACF,CA+LD,C,suCC3NO,SAASC,IAAiB,IAAAC,EAC1BC,GAA+C,QAAvCD,EAAAlL,SAASC,cAAe,sBAAe,IAAAiL,OAAA,EAAvCA,EAAyCtC,MAAMwC,gBAAiB,GAChEpL,SAASyE,iBAAkB,eAEnCQ,QAAS,SAAAzB,GACd,IAAM9B,EAAO8B,EAAKpD,YAAYgL,cAC9B5H,EAAK6F,MAAMC,QAAU5H,EAAK2J,SAAUF,GAAU,GAAK,MACpD,EACD,CCCA,SAASG,EAAUC,GAClBvL,SAASwL,gBAAgBC,UAAY,GAEtB,YAAVF,GACJvL,SAASwL,gBAAgBrH,UAAUrB,IAAI,GAAD7B,OAAMsK,EAAK,WAGlDvL,SAASsB,KAAK6C,UAAUE,OAAQ,cAEL,oBAAfqH,YAAoD,UAAtBA,WAAWH,IACpDvL,SAASsB,KAAK6C,UAAUrB,IAAK,aAE/B,CChBA,SAAS6I,IACQ3L,SAASyE,iBAAkB,wBAEnCQ,QAAS,SAAA2G,GAChBA,EAAOlL,iBAAkB,QAAS,WACjC,IAAMgJ,EAAOkC,EAAOC,QAAQC,aACvBC,QAAS,sCAAwCrC,EAAO,MAC5D1I,MAAM,GAADC,OAAMC,OAAOC,SAAQ,iCAAAF,OAAkCM,mBAAoBmI,KAC9ElI,KAAM,SAAAuF,GAAG,OAAIA,EAAIrF,MAAM,GACvBF,KAAM,SAAAwK,GAEN,GADAC,MAAOD,GACFA,EAAIX,SAAU,gBAAmB,CACrC,IAAMa,EAAalM,SAASY,eAAgB,kBACvCsL,GAAaA,EAAWC,OAC9B,CACD,GAAG,MACK,kBAAMF,MAAO,6BAA8B,EAEtD,EACD,EACD,CAEA,SAASG,IACR,IAAMC,EAASrM,SAASY,eAAgB,gBAClC0L,EAAOtM,SAASyE,iBAAkB,0BAElC4H,GAAWC,EAAK5J,QAEtB2J,EAAO3L,iBAAkB,SAAU,WAClC,IAAMkI,EAAQyD,EAAOzD,MACjB2D,EAAe,EAEnBD,EAAKrH,QAAS,SAAAuH,GACb,IAAMC,EAAQD,EAAIrI,UAAUR,SAAU,aAChC+I,EAAUF,EAAIrI,UAAUR,SAAU,cAClCgJ,EAAUH,EAAIrI,UAAUR,SAAU,cAEpCiJ,GAAO,EACI,iBAAVhE,EAA2BgE,GAAQF,EACpB,iBAAV9D,EAA2BgE,GAAQD,EACzB,aAAV/D,EAAuBgE,EAAOH,EACpB,YAAV7D,IAAsBgE,GAAQH,GAExCD,EAAInD,MAAMC,QAAUsD,EAAO,GAAK,OAC3BA,GAAOL,GACb,GAEA,IAAMM,EAAW7M,SAASY,eAAgB,mBACrCiM,IACJA,EAASxD,MAAMC,QAA2B,IAAjBiD,EAAqB,GAAK,OAErD,EACD,CAEA,SAASO,IACR9M,SAASU,iBAAkB,QAAS,SAAAsB,GACnC,GAAKA,EAAEyB,OAAOsJ,QAAS,gBAAmB,CACzC,IAAMC,EAAOhL,EAAEyB,OAAOoI,QAAQmB,KAAKC,QAAS,WAAY,MACnDD,GACJhM,MAAM,GAADC,OAAMC,OAAOC,SAAQ,yBAA0B,CACnDC,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAEjBC,KAAMM,KAAKsL,UAAW,CAACF,KAAAA,KAG1B,CACD,EACD,C,82CRlFChN,SAASU,iBAAkB,mBAAoB,WAC9CZ,IACAsH,YAAatH,EAAa,IAC3B,GG6BAE,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMyM,EAAYnN,SAASC,cAAe,YAC1C,GAAMkN,EAAN,CAGA,IAAMC,EAAc,CAAE,SAAU,SAAU,SAAU,UAC9CC,EAAYhI,aAAaS,QAAS,cACnCuH,GAAaD,EAAY/B,SAAUgC,IACvClI,EAAgBkI,GAIjB,IAAMC,EAAWtN,SAASY,eAAgB,eACpC2M,EAAUvN,SAASY,eAAgB,cACnC4M,EAAUxN,SAASY,eAAgB,cAEpC0M,GACJA,EAAS5M,iBAAkB,QAAS,kBAAMyE,EAAgB,OAAQ,GAE9DoI,GACJA,EAAQ7M,iBAAkB,QAAS,kBAAMgF,EAAkB,OAAQ0H,EAAa,GAE5EI,GACJA,EAAQ9M,iBAAkB,QAAS,kBAAMgF,EAAkB,OAAQ0H,EAAa,GAIjF,IAAMK,EAAa7L,KAAKC,MAAOwD,aAAaS,QAAS,gBAAmB,MACnEvB,MAAMmJ,QAASD,IAAgBA,EAAW/K,QAC9C+K,EAAWxI,QAAS,SAAE0I,GACrB,IAAMC,EAAM5N,SAASY,eAAgB+M,GAEhCC,GAAOA,EAAIzJ,UAAUR,SAAU,YAAeiK,EAAIzJ,UAAUR,SAAU,oBAC1EwJ,EAAUnE,YAAa4E,EAEzB,GAWDvL,EAAgB,WAAY,CAC3BW,MAAO,gCACPE,OAAQ,iBAITiK,EAAUzM,iBAAkB,SAd5B,WACC,IAAMmN,EAAQtJ,MAAMC,KAAM2I,EAAU1I,iBAAkB,2CACpDqJ,IAAK,SAAE5I,GAAE,OAAMA,EAAGyI,EAAE,GACpBtB,OAAQ0B,SACV1I,aAAaC,QAAS,cAAe1D,KAAKsL,UAAWW,GACtD,EAzCwB,CAmDzB,GMnFA7N,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMsN,EAAWhO,SAASY,eAAgB,aACpCqN,EAASjO,SAASY,eAAgB,iBAClC8J,EAAO1K,SAASC,cAAe,uBAuBrC,SAASiO,IAAyB,IAAZ1K,EAAIf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACvB0L,EAAKnO,SAAS2I,cAAe,MACnCwF,EAAG1C,UAAY,YACf0C,EAAG3G,UAAY,2DAAHvG,OACsCuC,EAAK4K,OAAS,GAAE,4DAAAnN,OAClBuC,EAAK6K,KAAO,GAAE,6DAAApN,OACbuC,EAAK8K,MAAQ,GAAE,iEAAArN,OACXuC,EAAK+K,KAAO,GAAE,iFAGnEP,EAAShF,YAAamF,GAEtBA,EAAGlO,cAAe,qBAAsBS,iBAAkB,QAAS,WAClEyN,EAAG9J,SACHmK,GACD,GAEAjK,MAAMC,KAAM2J,EAAG1J,iBAAkB,UAAYQ,QAAS,SAAEkG,GACvDA,EAAMzK,iBAAkB,QAAS8N,EAClC,EACD,CAEA,SAASA,IACR,IAAMC,EAAY,GAClBlK,MAAMC,KAAMwJ,EAAS1J,UAAWW,QAAS,SAAEkJ,GAC1C,IAAMO,EAASP,EAAG1J,iBAAkB,SAC/BiK,EAAOhM,OAAS,GACrB+L,EAAUE,KAAM,CACfP,MAAOM,EAAO,GAAG9F,MAAMrB,OACvB8G,IAAKK,EAAO,GAAG9F,MAAMrB,OACrB+G,KAAMI,EAAO,GAAG9F,MAAMrB,OACtBgH,IAAKG,EAAO,GAAG9F,MAAMrB,QAEvB,GACA,IAAMqH,EAAgB5O,SAASY,eAAgB,mBAC1CgO,IACJA,EAAchG,MAAQhH,KAAKsL,UAAWuB,EAAW,KAAM,GAEzD,CA3DMT,GAAaC,GAAWvD,IAG9B1J,MAAM,GAADC,OAAMC,OAAOC,SAAQ,mCAAoC,CAAC2F,MAAO,aACpEtF,KAAM,SAAAuF,GAAG,OAAIA,EAAIuB,MAAM,GACvB9G,KAAM,SAAAG,GACNA,EAAKsD,QAASiJ,GACd7L,EAAgB,cAGhB2L,EAAStN,iBAAkB,SAAU8N,GACrCA,GACD,GAEDP,EAAOvN,iBAAkB,QAAS,WACjCwN,IAEA7L,EAAgB,cAChBmM,GACD,GAyCD,GCjEAxO,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMkC,EAAO5C,SAASY,eAAgB,uBAChCqN,EAASjO,SAASY,eAAgB,qBAClCiO,EAAY7O,SAASY,eAAgB,sBAC3C,GAAMgC,GAASqL,GAAWY,EAA1B,CAEA,IAAIC,EAAgB,GAChBC,EAAsB,mCACtBC,GAAQ,EACRC,EAAgB,KAoMpBrM,EAAKlC,iBAAkB,QAAS,SAAEsB,GAC5BA,EAAEyB,OAAOsJ,QAAS,+BACtBmC,GAEF,GACAtM,EAAKlC,iBAAkB,SAAU,SAAEsB,GAC7BA,EAAEyB,OAAOsJ,QAAS,mCACtBmC,GAEF,GAEAtM,EAAKlC,iBAAkB,QAAS,SAAEsB,GACjC,GAAKA,EAAEyB,OAAOC,QAAS,gBAAmB,KAAAyL,EACnCC,EAAgD,QAA5CD,EAAGnN,EAAEyB,OAAOC,QAAS,8BAAuB,IAAAyL,OAAA,EAAzCA,EAA2ClP,cAAe,kBAClEmP,IACJA,EAAKC,mBAAoB,YAAaC,KACtCJ,IAEF,CACA,GAAKlN,EAAEyB,OAAOC,QAAS,mBAAsB,CAC5C,IAAM8I,EAAMxK,EAAEyB,OAAOC,QAAS,iBACzB8I,IACJA,EAAInI,SACJ6K,IAEF,CACA,GAAKlN,EAAEyB,OAAOC,QAAS,yBAA4B,CAClD,IAAMyK,EAAKnM,EAAEyB,OAAOC,QAAS,uBACxByK,IACJA,EAAG9J,SACH6K,IAEF,CACD,GAEAtM,EAAKlC,iBAAkB,SAAU,WAChCsO,GAAQ,EACRR,GACD,GAIAvH,QAAQsI,IAAK,CACZvO,MAAM,GAADC,OAAMC,OAAOC,SAAQ,sCAAuC,CAAC2F,MAAO,aAActF,KAAM,SAAA6G,GAAC,OAAIA,EAAEC,MAAM,GAAE,MAAQ,iBAAM,EAAE,GAlNvH/D,MAAMmJ,QAASxM,OAAOsO,iBAC1BV,EAAgB5N,OAAOsO,eACrB1B,IAAK,SAAA2B,GAAC,OAAIA,GAAuB,iBAAXA,EAAE/F,KAAoB+F,EAAE/F,KAAKnC,OAAS,EAAE,GAC9D8E,OAAQ0B,SACVe,EAAgBvK,MAAMC,KAAM,IAAIkL,IAAKZ,IACrCC,EAAsB,mCAAqCD,EAAchB,IAAK,SAAA6B,GAAC,wBAAA1O,OAAuB0O,EAAC,MAAA1O,OAAO0O,EAAC,eAAeC,KAAM,IAC7H3I,QAAQ4I,QAASf,IAGlB9N,MAAM,GAADC,OAAMC,OAAOC,SAAQ,6CAA8C,CAAC2F,MAAO,aACrFtF,KAAM,SAAAuF,GAAG,OAAIA,EAAIuB,MAAM,GACvB9G,KAAM,SAAAG,GAMN,OALAmN,GAAiBvK,MAAMmJ,QAAS/L,GAASA,EAAO,IAC9CmM,IAAK,SAAA2B,GAAC,OAAIA,GAAuB,iBAAXA,EAAE/F,KAAoB+F,EAAE/F,KAAKnC,OAAS,EAAE,GAC9D8E,OAAQ0B,SACVe,EAAgBvK,MAAMC,KAAM,IAAIkL,IAAKZ,IACrCC,EAAsB,mCAAqCD,EAAchB,IAAK,SAAA6B,GAAC,wBAAA1O,OAAuB0O,EAAC,MAAA1O,OAAO0O,EAAC,eAAeC,KAAM,IAC7Hd,CACR,GAAG,MACK,WAGP,OADAC,EAAsB,mCADtBD,EAAgB,EAGjB,KA6LEtN,KAAM,SAAAsO,GAAgB,IAhJE9M,EACrB+M,EACAC,EA8IOrO,EAAYsO,EAAAH,EAAA,GAAR,GACjBzN,EAAgB,wBACXkC,MAAMmJ,QAAS/L,IAAUA,EAAKe,SAlJRM,EAmJPrB,EAlJdoO,EAAO/P,SAASkQ,0BAChBF,EAAMhQ,SAAS2I,cAAe,QAChCnB,UAAYxE,EAAM8K,IAAKqC,GAAiBP,KAAM,IAClDrL,MAAMC,KAAMwL,EAAI1L,UAAWW,QAAS,SAAAmL,GAAK,OAAIL,EAAK/G,YAAaoH,EAAO,GACtExN,EAAKoG,YAAa+G,GAGlBnN,EAAK6B,iBAAkB,uBAAwBQ,QAAS,SAAAkJ,GACvD,IAAMkC,EAASlC,EAAGlO,cAAe,yBACjC,GAAKoQ,EAAS,KAAAC,EAEPC,GAAyD,QAA7CD,EAAAnC,EAAGlO,cAAe,kCAA2B,IAAAqQ,OAAA,EAA7CA,EAA+C1H,QAAS,GACpE4H,EAAQxN,EAAMqH,KAAM,SAAAoG,GAAE,OAAKA,EAAG1H,OAAS,MAAQwH,CAAS,GACxDG,GAAMF,aAAK,EAALA,EAAOG,eAAgB,GAC9BD,IAAML,EAAOzH,MAAQ8H,GAC1BL,EAAOjH,SAAoC,IAAzB0F,EAAcpM,MACjC,CACD,IAmI8B,IAAzBE,EAAK0B,SAAS5B,QAAekO,EAAe,CAAC,GAClD5B,GAAQ,EACRR,GACD,GAEAP,EAAOvN,iBAAkB,QAAS,WACjCkQ,EAAe,CAAC,EACjB,EAlQ4C,CA8D5C,SAAStB,IAA8B,IAAVuB,EAAEpO,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC5BqO,EAAWD,EAAGE,OAAS,GACvBC,EAAaH,EAAG5D,SAAW,GACjC,MAAO,wHAAPhM,OAE0E6P,EAAQ,2FAAA7P,OACJ+P,EAAU,gGAIzF,CAEA,SAASb,IAA4B,IAAAc,EAAAC,EAAAC,EAAAC,EAjEjBC,EAiEK7N,EAAIf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC1B6O,GAlEaD,EAkEU7N,EAAK+N,aAjE7BF,GAA0B,WAAjBG,EAAOH,KAAuB9M,MAAMmJ,QAAS2D,GACnDI,OAAOC,QAASL,GAAQvD,IAAK,SAAA5H,GAAA,IAAAyL,EAAA1B,EAAA/J,EAAA,GAAI6K,EAAKY,EAAA,GAAE1E,EAAO0E,EAAA,SAAS,CAC9DZ,MAAOlI,OAAQkI,QAAAA,EAAS,IACxB9D,QAASpE,OAAQoE,QAAAA,EAAW,IAC5B,GAEK,IA2D0Ca,IAAKwB,GAAqBM,KAAM,IAGjF,OAFiBpM,EAAKmN,aAEf,uHAAP1P,OAEoEuC,EAAKuF,OAAS,GAAE,0FAAA9H,OACPuC,EAAKqH,MAAQ,GAAE,uGAAA5J,OACFuC,EAAKoO,KAAO,GAAE,gHAAA3Q,QACJuC,EAAKqO,aAAe,IAAIjC,KAAM,KAAK,uFAAA3O,OACzC,QADyCgQ,EAChD,QADgDC,EAC7D1N,EAAKsO,gBAAQ,IAAAZ,OAAA,EAAbA,EAAeH,aAAK,IAAAE,EAAAA,EAAI,GAAE,2FAAAhQ,OACA,QADAkQ,EACT,QADSC,EACtB5N,EAAKsO,gBAAQ,IAAAV,OAAA,EAAbA,EAAenE,eAAO,IAAAkE,EAAAA,EAAI,GAAE,8GAAAlQ,OAE3C8N,EAAmB,gGAAA9N,OAE1BuC,EAAKuO,aAAe,WAAa,GAAE,gKAAA9Q,OAI1DqQ,EAAS,wMAO3C,CAuBA,SAASV,IAA2B,IAAZpN,EAAIf,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzBuN,EAAMhQ,SAAS2I,cAAe,OACpCqH,EAAIxI,UAAY2I,EAAgB3M,GAChC,IAAM2K,EAAK6B,EAAIgC,kBACfpP,EAAKoG,YAAamF,GAClB,IAAMkC,EAASlC,EAAGlO,cAAe,yBAC5BoQ,IACJA,EAAOjH,SAAoC,IAAzB0F,EAAcpM,OAC3Bc,EAAKmN,eAAeN,EAAOzH,MAAQpF,EAAKmN,eAE9CzB,GACD,CAIA,SAASA,IACRF,GAAQ,EAKHC,GAAgBgD,aAAchD,GACnCA,EAAgBiD,WAAY1D,EAAa,IAJ1C,CAOA,SAASA,IAOT,IACOxL,EAPNiM,EAAgB,KACVD,IACNH,EAAUjG,MAAQhH,KAAKsL,WAKjBlK,EAAQ,GACdJ,EAAK6B,iBAAkB,uBAAwBQ,QAAS,SAAAkJ,GAAM,IAAAgE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACvDC,EAAM,SAAEC,GAAG,OAAMzE,EAAGlO,cAAe2S,EAAK,EAExC7J,GAAwC,QAAhCoJ,EAAAQ,EAAK,kCAA2B,IAAAR,OAAA,EAAhCA,EAAkCvJ,MAAMrB,SAAU,GAC1DsD,GAAsC,QAA/BuH,EAAAO,EAAK,iCAA0B,IAAAP,OAAA,EAA/BA,EAAiCxJ,MAAMrB,SAAU,GACxDqK,GAAoC,QAA9BS,EAAAM,EAAK,gCAAyB,IAAAN,OAAA,EAA9BA,EAAgCzJ,MAAMrB,SAAU,GACtDsL,GAAmD,QAAtCP,EAAAK,EAAK,wCAAiC,IAAAL,OAAA,EAAtCA,EAAwC1J,QAAS,GAC9DmI,GAAwC,QAAhCwB,EAAAI,EAAK,kCAA2B,IAAAJ,OAAA,EAAhCA,EAAkC3J,QAAS,GACnDqE,GAA4C,QAAlCuF,EAAAG,EAAK,oCAA6B,IAAAH,OAAA,EAAlCA,EAAoC5J,QAAS,GACvD+H,GAA0D,QAA3C8B,EAAAtE,EAAGlO,cAAe,gCAAyB,IAAAwS,OAAA,EAA3CA,EAA6C7J,QAAS,GACrEmJ,IAAqD,QAArCW,EAACvE,EAAGlO,cAAe,yBAAkB,IAAAyS,IAApCA,EAAsCzI,SAGvD6I,EAAS,GACf3E,EAAG1J,iBAAkB,iBAAkBQ,QAAS,SAAAuH,GAAO,IAAAuG,EAAAC,EAChDC,GAAoC,QAAhCF,EAAAvG,EAAIvM,cAAe,oBAAa,IAAA8S,OAAA,EAAhCA,EAAkCnK,QAAS,GAC/CP,GAAsC,QAAlC2K,EAAAxG,EAAIvM,cAAe,sBAAe,IAAA+S,OAAA,EAAlCA,EAAoCpK,QAAS,IAClDqK,EAAEvQ,QAAU2F,EAAE3F,SAASoQ,EAAOnE,KAAM,CAACoC,MAAOkC,EAAGhG,QAAS5E,GAC9D,GACA,IA5JKyF,EA4JCyD,GA5JDzD,EAAM,CAAC,EA4JoBgF,EA3J5B7N,QAAS,SAAAiO,GAAkC,IAAAC,EAAAD,EAA/BnC,MAAAA,OAAK,IAAAoC,EAAG,GAAEA,EAAAC,EAAAF,EAAEjG,QAAAA,OAAO,IAAAmG,EAAG,GAAEA,EAClCH,EAAIpK,OAAQkI,GAAQxJ,OACpBc,EAAIQ,OAAQoE,GAAU1F,QACvB0L,EAAEvQ,QAAU2F,EAAE3F,UAClBoL,EAAImF,GAAK5K,EAEX,GACOyF,GAsJA+D,EAAcgB,EAAWQ,MAAO,KAAMvF,IAAK,SAAAxD,GAAC,OAAIA,EAAE/C,MAAM,GAAG8E,OAAQ0B,SAEnEuF,EAAS,CACdvK,MAAAA,EACA8B,KAAAA,EACA+G,IAAAA,EACAC,YAAAA,EACAC,SAAU,CAACf,MAAAA,EAAO9D,QAAAA,GAClB0D,aAAAA,EACAoB,aAAAA,EACAR,aAAAA,IAKAxI,GAAS8B,GAAQ+G,GAAOC,EAAYnP,QAAUqO,GAAS9D,GAAW0D,GAAgBoB,GAAgBN,OAAO8B,KAAMhC,GAAe7O,SAC/GM,EAAM2L,KAAM2E,EAC7B,GACOtQ,GA7C4C,KAAM,GACzDgM,GAAQ,EACT,CA0GD,GCzQAhP,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMkC,EAAO5C,SAASY,eAAgB,uBAChCqN,EAASjO,SAASY,eAAgB,qBAaxC,SAAS4S,IACR,IAAMC,EAAY,GAClB7Q,EAAK6B,iBAAkB,kBAAmBQ,QAAS,SAAAzB,GAAQ,IAAAkQ,EAAAC,EACpDjK,EAA6C,QAAzCgK,EAAGlQ,EAAKvD,cAAe,yBAAkB,IAAAyT,OAAA,EAAtCA,EAAwC9K,MAAMrB,OACrDqM,EAA6C,QAAzCD,EAAGnQ,EAAKvD,cAAe,yBAAkB,IAAA0T,OAAA,EAAtCA,EAAwC/K,MAAMrB,OACtDmC,GAAQkK,GAAOH,EAAU9E,KAAM,CAACjF,KAAAA,EAAMkK,KAAAA,GAC5C,GAEA,IAAMC,EAAS7T,SAASY,eAAgB,6BACnCiT,IAASA,EAAOjL,MAAQhH,KAAKsL,UAAWuG,EAAW,KAAM,GAC/D,CAEA,SAASK,IAA6B,IAAZnS,EAAIc,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3B0L,EAAKnO,SAAS2I,cAAe,MACnCwF,EAAG1C,UAAY,gBACf0C,EAAG3G,UAAY,yFAAHvG,OACwEU,EAAK+H,MAAQ,GAAE,4FAAAzI,OACfU,EAAKiS,MAAQ,GAAE,gFAInGzF,EAAGlO,cAAe,oBAAqBS,iBAAkB,QAAS,WACjEyN,EAAG9J,SACHmP,GACD,GAEAjP,MAAMC,KAAM2J,EAAG1J,iBAAkB,UAAYQ,QAAS,SAAAkG,GACrDA,EAAMzK,iBAAkB,QAAS8S,EAClC,GAEA5Q,EAAKoG,YAAamF,GAClBqF,GACD,CA5CM5Q,GAASqL,IA8CfA,EAAOvN,iBAAkB,QAAS,kBAAMoT,GAAiB,GA3CxDlR,EAAK4E,UAAY,GACjBxG,MAAM,GAADC,OAAMC,OAAOC,SAAQ,6CAA8C,CAAC2F,MAAO,aAC9EtF,KAAM,SAAEuF,GAAG,OAAMA,EAAIuB,MAAM,GAC3B9G,KAAM,SAAEG,GACRA,EAAKsD,QAAS6O,GACdN,GACD,GAyCH,GPJAvN,EAAqB,CACpBE,UAAW,2BACXC,eAAgB,0BAChBC,aAAc,mBACdC,SAAU,+BAKXL,EAAqB,CACpBE,UAAW,wBACXC,eAAgB,uBAChBC,aAAc,gBACdC,SAAU,4BC9DkB,YAAxBtG,SAAS+T,WACb/T,SAASU,iBAAkB,mBAAoB,kBAAM+G,GAAa,GAElEA,ICHDzH,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMsT,EAAYhU,SAASC,cAAe,eACrC+T,GACJA,EAAUtT,iBAAkB,QAASuK,EAEvC,GMLAjL,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMuT,EAAWjU,SAASY,eAAgB,uBACpCqT,GAENA,EAASvT,iBAAkB,QAAS,WACnC,GAAMqL,QAAS,qDAAf,CAEA,IAAMmI,EAAmB,CAAE,QAAS,cAAe,cAEnDzC,OAAO8B,KAAMlO,cAAeJ,QAAS,SAAEkP,GACjCD,EAAiBE,KAAM,SAAAC,GAAM,OAAIF,EAAI1O,WAAY4O,EAAQ,IAC7DhP,aAAaiP,WAAYH,EAE3B,GAEAlI,MAAO,wDACPnB,SAASyJ,QAXoE,CAY9E,EACD,GAIAvU,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMsL,EAAMhM,SAASC,cAAe,gCAC9B+L,GAENkG,WAAY,WACXlG,EAAI3C,MAAMmL,WAAa,oBACvBxI,EAAI3C,MAAMoL,QAAU,IACpBvC,WAAY,kBAAMlG,EAAI3H,QAAQ,EAAE,IACjC,EAAG,IACJ,GC/BArE,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMY,EAAOtB,SAASsB,KAGtB,GAF2BtB,SAASY,eAAgB,mBAIa,SAA7CU,EAAKuF,aAAc,qBACvC,CAEA,IAAM6N,EAAU1U,SAASY,eAAgB,YACnC+T,EAAU3U,SAASY,eAAgB,gBACnCgU,EAAW5U,SAASY,eAAgB,cAuB1CI,MAAM,GAADC,OAAMC,OAAOC,SAAQ,0BAA2B,CAAC2F,MAAO,aAC3DtF,KAAM,SAAAC,GACN,GAAMA,EAASuF,GACf,OAAOvF,EAAS6G,MACjB,GACC9G,KAAM,SAAAG,GAEN+S,EAAQtU,YAAc,GAAHa,OAAOU,EAAKkT,IAAG,KAClCF,EAAQvU,YAAc,GAAHa,OAAOU,EAAKmT,OAAM,OACrCF,EAASxU,YAAc,GAAHa,OAAOU,EAAKoT,KAAI,KAdrB3N,YAAa4N,EAAkB,KAC/CA,GAeA,GAAG,MACK,WACP,EAxCwB,CAQ1B,SAASA,IACRhU,MAAM,GAADC,OAAMC,OAAOC,SAAQ,0BAA2B,CAAC2F,MAAO,aAC3DtF,KAAM,SAAAC,GACN,IAAMA,EAASuF,GAAK,MAAM,IAAIuB,MAAO,4BACrC,OAAO9G,EAAS6G,MACjB,GACC9G,KAAM,SAAAG,GACN+S,EAAQtU,YAAc,GAAHa,OAAOU,EAAKkT,IAAG,KAClCF,EAAQvU,YAAc,GAAHa,OAAOU,EAAKmT,OAAM,OACrCF,EAASxU,YAAc,GAAHa,OAAOU,EAAKoT,KAAI,IACrC,EACF,CAuBD,GNjDA/U,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMuU,EAAWjV,SAASC,cAAe,mBACzC,GAAMgV,EAAN,CAGA,IAAMC,EAAQ7P,aAAaS,QAAS,UAAaqP,aAAe,UAChE7J,EAAU4J,GAEVD,EAASrM,MAAQsM,EACjBD,EAASvU,iBAAkB,SAAU,SAAEsB,GACtC,IAAMoT,EAAWpT,EAAEyB,OAAOmF,MAC1B0C,EAAU8J,GACV/P,aAAaC,QAAS,QAAS8P,EAChC,EAXuB,CAYxB,GCd6B,YAAxBpV,SAAS+T,WACb/T,SAASU,iBAAkB,mBAAoB,WAC9CiL,IACAS,IACAU,GACD,IAEAnB,IACAS,IACAU,KMVK,WAEN,SAASuI,EAAanQ,GAChBA,EAAGoQ,YACT,CAUA,SAASC,EAAiBrQ,GACzB,IAAMsQ,EAAKC,iBAAkBvQ,GAEvBwQ,EAAY,SAAEpL,GAAC,OAAMA,EAAE+I,MAAO,KAAMvF,IAAK,SAAA6H,GAAC,OAAIC,WAAYD,IAAO,CAAC,EAAE,EACpE5K,EAAI8K,KAAKC,IAAGC,MAARF,KAAIG,EAASN,EAAWF,EAAGS,sBAC/BC,EAAQL,KAAKC,IAAGC,MAARF,KAAIG,EAASN,EAAWF,EAAGW,mBACzC,OAAON,KAAKO,MAAqB,KAAbrL,EAAImL,KAAmB,CAC5C,CAEAlW,SAASU,iBAAkB,mBAAoB,WAC9CV,SAASyE,iBAAkB,6BAA8BQ,QAAS,SAAEkI,EAAWrE,GAE9E,GAAyC,MAApCqE,EAAUtB,QAAQwK,cAAvB,CACAlJ,EAAUtB,QAAQwK,cAAgB,IAElC,IAAM3P,EAASyG,EAAUlN,cAAe,qBAClCqW,EAAUnJ,EAAUlN,cAAe,mBACzC,GAAMyG,GAAW4P,EAAjB,CAEA,IAAMC,EAAkB5M,SAAU2M,EAAQzK,QAAQ0K,kBAAqB,EACjEC,EAAcrJ,EAAUtB,QAAQ8B,IAAM,aAAe7E,EAGvD2N,EAAY,EACZC,EAAgB,EAChBC,EAAQ,KA2GNC,EAAsB,SADdvR,aAAaS,QAAS,aAAe0Q,GAEnDK,EAAaD,GAERA,GACJN,EAAQzC,QAAS,EACjByC,EAAQjN,MAAMyN,OAASR,EAAQS,aAAe,KAC9CC,sBAAuB,WACtBV,EAAQjN,MAAMyN,OAAS,MACxB,KAEAR,EAAQjN,MAAMyN,OAASP,EAAkB,KACzCD,EAAQzC,QAAS,GAIlBnN,EAAOhG,iBAAkB,QAAS,SAAEuW,GA3JtC,IAA2BrE,GA4JxBqE,EAAMC,kBA5JkBtE,EA8JG,gBAAPqE,EA7JXxT,OAAOC,QAASkP,KA8JzBuE,GACD,GAGAzQ,EAAOhG,iBAAkB,UAAW,SAAEsB,GACrC,GAAe,MAAVA,EAAEmS,KAAyB,UAAVnS,EAAEmS,IACvBnS,EAAEoC,iBACF+S,SACM,GAAe,cAAVnV,EAAEmS,KACRhH,EAAUhJ,UAAUR,SAAU,UAAa2S,EAAQzC,OAAS,CAChE,IAAMpQ,EAAyB6S,EApKvBrW,cAAe,kEAqKlBwD,GAASA,EAAO2T,OACtB,CAEF,EApJiC,CALoB,CAerD,SAASC,IACHV,IACJL,EAAQgB,oBAAqB,gBAAiBX,GAC9CA,EAAQ,MAEJD,IACJzE,aAAcyE,GACdA,EAAgB,EAElB,CAEA,SAASG,EAAaU,GACrBpK,EAAUhJ,UAAUuC,OAAQ,OAAQ6Q,GACpC7Q,EAAOE,aAAc,gBAAiB2Q,EAAS,OAAS,SACxDlS,aAAaC,QAAS,aAAekR,EAAae,EAAS,OAAS,SACrE,CAEA,SAASC,EAAYxM,GACfA,IAAUyL,IACfH,EAAQjN,MAAMyN,OAAS,OACxB,CAEA,SAASW,EAAazM,GAChBA,IAAUyL,IACfH,EAAQzC,QAAS,EAClB,CAiEA,SAASsD,IACR,IA/DMnM,EA+DA0M,GAAYvK,EAAUhJ,UAAUR,SAAU,QAE3C+T,GAAYpB,EAAQzC,SAASyC,EAAQzC,QAAS,GACnD6D,GAlEM1M,IAAUyL,EAChBY,IAGAf,EAAQzC,QAAS,EACjBgD,GAAa,GAGbP,EAAQjN,MAAMyN,OAASP,EAAkB,KACzClB,EAAaiB,GACbU,sBAAuB,WACtB,GAAKhM,IAAUyL,EAAf,CACA,IAAMhT,EAAS6S,EAAQS,aACvBT,EAAQjN,MAAMyN,OAASrT,EAAS,KAEhCkT,EAAQ,SAAE3U,GACJA,EAAEyB,SAAW6S,GAA8B,WAAnBtU,EAAE2V,eAC/BN,IACAG,EAAYxM,GACb,EACAsL,EAAQ5V,iBAAkB,gBAAiBiW,GAE3C,IAAMiB,EAAKrC,EAAiBe,GACvBsB,EAAK,IACTlB,EAAgBxE,WAAY,WAC3BmF,IACAG,EAAYxM,EACb,EAAG4M,EAAK,IAhBwB,CAkBlC,IAGD,WACC,IAAM5M,IAAUyL,EAChBY,IAEAR,GAAa,GAGbP,EAAQjN,MAAMyN,OAASR,EAAQS,aAAe,KAC9C1B,EAAaiB,GACbU,sBAAuB,WACtB,GAAKhM,IAAUyL,EAAf,CACAH,EAAQjN,MAAMyN,OAASP,EAAkB,KAEzCI,EAAQ,SAAE3U,GACJA,EAAEyB,SAAW6S,GAA8B,WAAnBtU,EAAE2V,eAC/BN,IACAI,EAAazM,GACd,EACAsL,EAAQ5V,iBAAkB,gBAAiBiW,GAE3C,IAAMiB,EAAKrC,EAAiBe,GACvBsB,EAAK,IACTlB,EAAgBxE,WAAY,WAC3BmF,IACAI,EAAazM,EACd,EAAG4M,EAAK,IAfwB,CAiBlC,EACD,CAM0BC,GAGzBb,sBAAuB,WACP7J,EAAUhJ,UAAUR,SAAU,SAC9B2S,EAAQzC,SAASyC,EAAQzC,QAAS,EAClD,EACD,CAsCD,GAGA3S,OAAOR,iBAAkB,SAAU,WAClCV,SAASyE,iBAAkB,kDAAmDQ,QAAS,SAAEqR,GACnFA,EAAQzC,SAASyC,EAAQzC,QAAS,GACT,SAAzByC,EAAQjN,MAAMyN,SAClBR,EAAQjN,MAAMyN,OAASR,EAAQS,aAAe,KAEhD,EACD,EACD,EACD,CC9JAe,GDiKC9X,SAASU,iBAAkB,mBAAoB,WAC9C,IAAMqX,EAAQ,CACb,MAAS/X,SAASY,eAAgB,gBAClC,SAAYZ,SAASY,eAAgB,iBACrC,QAAWZ,SAASY,eAAgB,gBACpC,OAAUZ,SAASY,eAAgB,eACnC,MAASZ,SAASY,eAAgB,eAG7BoX,EAAU,CACf,MAAS,QACT,SAAY,WACZ,QAAW,UACX,mBAAoB,SACpB,kBAAmB,SAWpB,SAASC,IAER,OADe,IAAIC,gBAAiBhX,OAAO4J,SAASqN,QACtCxF,IAAK,SAAY,OAChC,CAEA,SAASyF,EAAUC,GAAyB,IAAf1J,EAAIlM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC1B0R,EAAM6D,EAAQK,IAAa,QAOjC,GALA5G,OAAOC,QAASqG,GAAQ9S,QAAS,SAAAiB,GAAiB,IAAAyL,EAAA1B,EAAA/J,EAAA,GAAboS,EAAC3G,EAAA,GAAEzM,EAAEyM,EAAA,GACpCzM,GAAKA,EAAGf,UAAUuC,OAAQ,UAAW4R,IAAMnE,EACjD,GAGa,WAARA,GAA4B,UAARA,EAAkB,CAC1C,IAAM1Q,EAASsU,EAAM5D,GACrB,GAAK1Q,IAAWA,EAAOoI,QAAQ0M,OAAS,CAEvC9U,EAAO+D,UAAY,0FACnB,IAAM6G,EAAM,SAAHpN,OAAakT,EAAG,kBAEzBnT,MAAM,GAADC,OAAMC,OAAOC,UAAY,KAAGF,OAAKoN,IACpC7M,KAAM,SAAAuF,GAAG,OAAIA,EAAIrF,MAAM,GACvBF,KAAM,SAAAoS,GACNnQ,EAAO+D,UAAYoM,EACnBnQ,EAAOoI,QAAQ0M,OAAS,MACzB,GAAG,MACK,SAAAhP,GACP9F,EAAO+D,UAAY,mCAAHvG,OAAuCoN,EAAG,QAC1DpM,QAAQC,MAAM,6BAADjB,OAAgCoN,GAAQ9E,EACtD,EACF,CACD,CAEA,GAAKoF,EAAO,CACX,IAAM6J,EAAOtX,OAAOC,UAAYD,OAAO4J,SAAS2N,SAC1CC,EAAgB,UAARvE,EAAkB,GAAK,SAAW5S,mBAAoB8W,GACpEM,QAAQC,UAAW,CAAC,EAAG,GAAIJ,EAAOE,EACnC,CACD,CAGAjH,OAAOC,QAjDW,CACjB,eAAgB,QAChB,kBAAmB,WACnB,iBAAkB,UAClB,0BAA2B,mBAC3B,yBAA0B,oBA4CCzM,QAAS,SAAAiO,GAA8B,IAAApD,EAAAG,EAAAiD,EAAA,GAA1B2F,EAAQ/I,EAAA,GAAEuI,EAAQvI,EAAA,GACpDpJ,EAAS1G,SAASY,eAAgBiY,GACnCnS,GACJA,EAAOhG,iBAAkB,QAAS,SAAEsB,GACnCA,EAAEoC,iBACFgU,EAAUC,GAAU,EACrB,EAEF,GAGAD,EAAUH,KAGV/W,OAAOR,iBAAkB,WAAY,WACpC0X,EAAUH,IACX,EACD,E","sources":["webpack://pav-localhost/./assets/js/modules/clock.js","webpack://pav-localhost/./assets/js/modules/apache.js","webpack://pav-localhost/./assets/js/modules/drag.js","webpack://pav-localhost/./assets/js/modules/columns.js","webpack://pav-localhost/./assets/js/modules/error.js","webpack://pav-localhost/./assets/js/modules/export.js","webpack://pav-localhost/./assets/js/modules/search.js","webpack://pav-localhost/./assets/js/modules/theme.js","webpack://pav-localhost/./assets/js/modules/vhosts.js","webpack://pav-localhost/./assets/js/modules/dock.js","webpack://pav-localhost/./assets/js/modules/folders.js","webpack://pav-localhost/./assets/js/modules/linkTemplates.js","webpack://pav-localhost/./assets/js/modules/settings.js","webpack://pav-localhost/./assets/js/modules/system.js","webpack://pav-localhost/./assets/js/modules/view.js","webpack://pav-localhost/./assets/js/main.js"],"sourcesContent":["// assets/js/modules/clock.js\nexport function initClock() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tupdateClock();\n\t\tsetInterval( updateClock, 1000 );\n\t} );\n}\n\nexport function updateClock() {\n\tconst clock = document.querySelector( '.clock' );\n\tif ( clock ) {\n\t\tconst now = new Date();\n\t\tclock.textContent = now.toLocaleTimeString( [], {\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit',\n\t\t\thour12: false\n\t\t} );\n\t}\n}\n","// assets/js/modules/apache.js\nexport function toggleApache( action ) {\n\tconst messageBox = document.getElementById( 'apache-status-message' );\n\tif ( !messageBox ) return;\n\tmessageBox.innerText = 'Executing ' + action + '...';\n\tfetch( `${ window.BASE_URL }utils/toggle_apache.php`, {\n\t\tmethod: 'POST',\n\t\theaders: {'Content-Type': 'application/x-www-form-urlencoded'},\n\t\tbody: 'action=' + encodeURIComponent( action )\n\t} )\n\t\t.then( response => response.text() )\n\t\t.then( text => {\n\t\t\ttry {\n\t\t\t\tconst data = JSON.parse( text );\n\t\t\t\tmessageBox.innerText = data.message;\n\t\t\t\tif ( typeof renderServerInfo === 'function' ) {\n\t\t\t\t\trenderServerInfo(); // Refresh Apache status\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( 'Invalid JSON:', text );\n\t\t\t\tmessageBox.innerText = 'Error: Invalid server response';\n\t\t\t}\n\t\t} )\n\t\t.catch( error => {\n\t\t\tmessageBox.innerText = 'Error: ' + error;\n\t\t} );\n}\n\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tconst btn = document.getElementById( 'restart-apache-button' );\n\tif ( btn ) {\n\t\tbtn.addEventListener( 'click', () => toggleApache( 'restart' ) );\n\t}\n} );\n","// assets/js/modules/drag.js\r\nconst _initialisedLists = new WeakSet();\r\n\r\nexport function enableDragSort( listSelector, opts = {} ) {\r\n\tconst list = document.querySelector( listSelector );\r\n\tif ( !list ) return;\r\n\r\n\tif ( _initialisedLists.has( list ) ) return;\r\n\t_initialisedLists.add( list );\r\n\r\n\tconst itemsSelector = opts.items || 'li';\r\n\tconst handleSelector = opts.handle || null;\r\n\r\n\t// Configurable \"interactive\" rules\r\n\tconst interactiveSelector = opts.interactiveSelector || 'input, select, textarea, button, a, [contenteditable], .no-drag';\r\n\tconst allowInsideHandle = opts.allowInsideHandle || '[data-drag-allow]'; // whitelist inside handle\r\n\tconst allowHandleInteractive = opts.allowHandleInteractive ?? true; // allow whitelisted interactives inside handle\r\n\r\n\tlet dragSrcEl = null;\r\n\tlet dragging = false;\r\n\r\n\tfunction isInteractive( el ) {\r\n\t\treturn !!el.closest( interactiveSelector );\r\n\t}\r\n\r\n\tlist.addEventListener( 'pointerdown', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\r\n\t\tconst isHandleHit = handleSelector ? !!e.target.closest( handleSelector ) : true;\r\n\t\tif ( handleSelector && !isHandleHit ) return;\r\n\r\n\t\tconst interactiveHit = isInteractive( e.target );\r\n\r\n\t\t// If we hit an interactive element…\r\n\t\tif ( interactiveHit ) {\r\n\t\t\t// …but it's inside the handle and on the allowlist, let it start drag\r\n\t\t\tconst allowed = allowHandleInteractive && isHandleHit && e.target.closest( allowInsideHandle );\r\n\t\t\tif ( !allowed ) return;\r\n\t\t}\r\n\r\n\t\titem.draggable = true;\r\n\t}, {capture: true} );\r\n\r\n\tlist.addEventListener( 'dragstart', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\t\tdragSrcEl = item;\r\n\t\tdragging = true;\r\n\r\n\t\te.dataTransfer.effectAllowed = 'move';\r\n\t\ttry {\r\n\t\t\te.dataTransfer.setData( 'text/plain', '' );\r\n\t\t} catch ( _ ) {\r\n\t\t}\r\n\t\titem.classList.add( 'dragElem' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragenter', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( !item || !list.contains( item ) ) return;\r\n\t\titem.classList.add( 'over' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragover', ( e ) => {\r\n\t\tif ( dragSrcEl ) e.preventDefault();\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragleave', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( item && list.contains( item ) ) item.classList.remove( 'over' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'drop', ( e ) => {\r\n\t\te.preventDefault();\r\n\t\tconst target = e.target.closest( itemsSelector );\r\n\t\tif ( !target || !dragSrcEl || target === dragSrcEl ) return;\r\n\r\n\t\tconst children = Array.from( list.querySelectorAll( `:scope > ${ itemsSelector }` ) );\r\n\t\tconst from = children.indexOf( dragSrcEl );\r\n\t\tconst to = children.indexOf( target );\r\n\r\n\t\tif ( from > -1 && to > -1 ) {\r\n\t\t\tif ( from < to ) target.after( dragSrcEl );\r\n\t\t\telse target.before( dragSrcEl );\r\n\t\t\tlist.dispatchEvent( new CustomEvent( 'sorted', {bubbles: true} ) );\r\n\t\t}\r\n\t\ttarget.classList.remove( 'over' );\r\n\t} );\r\n\r\n\tlist.addEventListener( 'dragend', ( e ) => {\r\n\t\tconst item = e.target.closest( itemsSelector );\r\n\t\tif ( item && list.contains( item ) ) {\r\n\t\t\titem.classList.remove( 'dragElem' );\r\n\t\t\titem.draggable = false;\r\n\t\t}\r\n\t\tArray.from( list.querySelectorAll( itemsSelector ) ).forEach( el => el.classList.remove( 'over' ) );\r\n\t\tdragSrcEl = null;\r\n\t\tdragging = false;\r\n\t} );\r\n\r\n\t// Suppress accidental click activation after a drag\r\n\tlist.addEventListener( 'click', ( e ) => {\r\n\t\tif ( !dragging ) return;\r\n\t\tif ( handleSelector && e.target.closest( handleSelector ) ) e.preventDefault();\r\n\t}, true );\r\n}\r\n","// assets/js/modules/columns.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nexport function setColumnWidth( size ) {\r\n\tlocalStorage.setItem( 'columnSize', size );\r\n\tconst columnsDiv = document.querySelector( '.columns' );\r\n\tif ( !columnsDiv ) return;\r\n\r\n\tcolumnsDiv.classList.forEach( ( cls ) => {\r\n\t\tif ( cls.startsWith( 'max-' ) ) {\r\n\t\t\tcolumnsDiv.classList.remove( cls );\r\n\t\t}\r\n\t} );\r\n\r\n\tif ( size !== 'auto' ) {\r\n\t\tcolumnsDiv.classList.add( size );\r\n\t}\r\n}\r\n\r\nexport function cycleColumnWidth( direction, sizes ) {\r\n\tconst current = localStorage.getItem( 'columnSize' ) || 'auto';\r\n\tconst idx = sizes.indexOf( current );\r\n\tlet nextIdx = 0;\r\n\r\n\tif ( direction === 'next' ) {\r\n\t\tnextIdx = (idx + 1) % sizes.length;\r\n\t} else if ( direction === 'prev' ) {\r\n\t\tnextIdx = (idx - 1 + sizes.length) % sizes.length;\r\n\t}\r\n\r\n\tsetColumnWidth( sizes[nextIdx] );\r\n}\r\n\r\nexport function initColumnFeatures() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst container = document.querySelector( '.columns' );\r\n\t\tif ( !container ) return;\r\n\r\n\t\t// Restore saved width\r\n\t\tconst columnSizes = [ 'max-xs', 'max-sm', 'max-md', 'max-lg' ];\r\n\t\tconst savedSize = localStorage.getItem( 'columnSize' );\r\n\t\tif ( savedSize && columnSizes.includes( savedSize ) ) {\r\n\t\t\tsetColumnWidth( savedSize );\r\n\t\t}\r\n\r\n\t\t// Width controls\r\n\t\tconst resetBtn = document.getElementById( 'reset-width' );\r\n\t\tconst prevBtn = document.getElementById( 'prev-width' );\r\n\t\tconst nextBtn = document.getElementById( 'next-width' );\r\n\r\n\t\tif ( resetBtn ) {\r\n\t\t\tresetBtn.addEventListener( 'click', () => setColumnWidth( 'auto' ) );\r\n\t\t}\r\n\t\tif ( prevBtn ) {\r\n\t\t\tprevBtn.addEventListener( 'click', () => cycleColumnWidth( 'prev', columnSizes ) );\r\n\t\t}\r\n\t\tif ( nextBtn ) {\r\n\t\t\tnextBtn.addEventListener( 'click', () => cycleColumnWidth( 'next', columnSizes ) );\r\n\t\t}\r\n\r\n\t\t// Restore saved column order (IDs are the source of truth)\r\n\t\tconst savedOrder = JSON.parse( localStorage.getItem( 'columnOrder' ) || '[]' );\r\n\t\tif ( Array.isArray( savedOrder ) && savedOrder.length ) {\r\n\t\t\tsavedOrder.forEach( ( id ) => {\r\n\t\t\t\tconst col = document.getElementById( id );\r\n\t\t\t\t// skip control “column” rows if any; only reorder actual columns\r\n\t\t\t\tif ( col && col.classList.contains( 'column' ) && !col.classList.contains( 'column-controls' ) ) {\r\n\t\t\t\t\tcontainer.appendChild( col );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction saveOrder() {\r\n\t\t\tconst order = Array.from( container.querySelectorAll( ':scope > .column:not(.column-controls)' ) )\r\n\t\t\t\t.map( ( el ) => el.id )\r\n\t\t\t\t.filter( Boolean );\r\n\t\t\tlocalStorage.setItem( 'columnOrder', JSON.stringify( order ) );\r\n\t\t}\r\n\r\n\t\t// Hook into the shared drag util (same pattern as dock/folders)\r\n\t\tenableDragSort( '.columns', {\r\n\t\t\titems: '.column:not(.column-controls)',\r\n\t\t\thandle: '.drag-handle'\r\n\t\t} );\r\n\r\n\t\t// Persist whenever user reorders\r\n\t\tcontainer.addEventListener( 'sorted', saveOrder );\r\n\t} );\r\n}\r\n","// assets/js/modules/error.js\r\nfunction initGenericErrorLog( {\r\n\t                              sectionId,\r\n\t                              toggleButtonId,\r\n\t                              logElementId,\r\n\t                              endpoint\r\n                              } ) {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst body = document.body;\r\n\t\tconst logSection = document.getElementById( sectionId );\r\n\t\tif ( !logSection ) return;\r\n\r\n\t\tconst toggleBtn = document.getElementById( toggleButtonId );\r\n\t\tconst logElement = document.getElementById( logElementId );\r\n\r\n\t\tif ( !toggleBtn || !logElement ) return;\r\n\r\n\t\ttoggleBtn.addEventListener( 'click', function () {\r\n\t\t\tconst isVisible = logElement.classList.contains( 'visible' );\r\n\t\t\tlogElement.classList.toggle( 'visible', !isVisible );\r\n\t\t\tthis.setAttribute( 'aria-expanded', !isVisible );\r\n\t\t} );\r\n\r\n\t\tif ( body.getAttribute( 'data-ajax-enabled' ) !== 'true' ) return;\r\n\r\n\t\tfunction displayLogContent( data ) {\r\n\t\t\tconst isEmpty = data.trim() === '';\r\n\t\t\tlogElement.innerHTML = isEmpty\r\n\t\t\t\t? `<code class=\"muted\">No errors logged. You're doing great. 🎉</code>`\r\n\t\t\t\t: `<code>${ data }</code>`;\r\n\t\t}\r\n\r\n\t\tfunction fetchLog() {\r\n\t\t\tfetch( `${ window.BASE_URL }${ endpoint }`, {cache: 'no-store'} )\r\n\t\t\t\t.then( res => res.ok ? res.text() : Promise.reject() )\r\n\t\t\t\t.then( displayLogContent );\r\n\t\t}\r\n\r\n\t\tfetch( `${ window.BASE_URL }${ endpoint }`, {cache: 'no-store'} )\r\n\t\t\t.then( res => res.ok ? res.text() : Promise.reject() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tdisplayLogContent( data );\r\n\t\t\t\tsetInterval( fetchLog, 3000 );\r\n\t\t\t} )\r\n\t\t\t.catch( () => {\r\n\t\t\t} );\r\n\t} );\r\n}\r\n\r\n// Public wrappers — keeps main.js simple\r\nexport function initApacheErrorLog() {\r\n\tinitGenericErrorLog( {\r\n\t\tsectionId: 'apache-error-log-section',\r\n\t\ttoggleButtonId: 'toggle-apache-error-log',\r\n\t\tlogElementId: 'apache-error-log',\r\n\t\tendpoint: 'utils/apache_error_log.php'\r\n\t} );\r\n}\r\n\r\nexport function initPhpErrorLog() {\r\n\tinitGenericErrorLog( {\r\n\t\tsectionId: 'php-error-log-section',\r\n\t\ttoggleButtonId: 'toggle-php-error-log',\r\n\t\tlogElementId: 'php-error-log',\r\n\t\tendpoint: 'utils/php_error_log.php'\r\n\t} );\r\n}\r\n","// assets/js/modules/export.js\r\nexport function initExportModule() {\r\n\tif ( document.readyState === 'loading' ) {\r\n\t\tdocument.addEventListener( 'DOMContentLoaded', () => setupExport() );\r\n\t} else {\r\n\t\tsetupExport();\r\n\t}\r\n}\r\n\r\nfunction setupExport() {\r\n\tconst groupEl = document.getElementById( 'export-group' );\r\n\tconst folderEl = document.getElementById( 'export-folder' );\r\n\tconst uploadsModeRow = document.getElementById( 'uploads-mode-row' );\r\n\r\n\tconst filesForm = document.getElementById( 'export-files-form' );\r\n\tconst filesStatus = document.getElementById( 'export-files-status' );\r\n\r\n\tconst dbForm = document.getElementById( 'export-db-form' );\r\n\tconst dbSelect = document.getElementById( 'export-db' );\r\n\tconst dbStatus = document.getElementById( 'export-db-status' );\r\n\r\n\tif ( !groupEl || !folderEl ) return;\r\n\r\n\tlet groups = [];\r\n\r\n\t// Helpers\r\n\tfunction refreshCsrf() {\r\n\t\treturn fetch( `${ window.BASE_URL }partials/export.php?action=token`, {credentials: 'same-origin'} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( d => {\r\n\t\t\t\tif ( d.ok && d.token ) {\r\n\t\t\t\t\tdocument.querySelectorAll( 'input[name=\"csrf\"]' ).forEach( el => {\r\n\t\t\t\t\t\tel.value = d.token;\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t\t.catch( () => {\r\n\t\t\t} );\r\n\t}\r\n\r\n\tfunction renderGroups( selectEl, data ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tdata.forEach( ( g ) => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = String( g.index );\r\n\t\t\topt.textContent = g.title;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction renderFolders( selectEl, subfolders ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tif ( !subfolders.length ) {\r\n\t\t\tselectEl.innerHTML = `<option value=\"\">No subfolders found</option>`;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsubfolders.forEach( sf => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = sf.name;\r\n\t\t\topt.textContent = sf.name;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction renderDatabases( selectEl, dbs ) {\r\n\t\tselectEl.innerHTML = '';\r\n\t\tif ( !dbs.length ) {\r\n\t\t\tselectEl.innerHTML = `<option value=\"\">No databases found</option>`;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdbs.forEach( name => {\r\n\t\t\tconst opt = document.createElement( 'option' );\r\n\t\t\topt.value = name;\r\n\t\t\topt.textContent = name;\r\n\t\t\tselectEl.appendChild( opt );\r\n\t\t} );\r\n\t}\r\n\r\n\t// Initial loads\r\n\trefreshCsrf();\r\n\r\n\tfetch( `${ window.BASE_URL }partials/export.php?action=scan`, {credentials: 'same-origin'} )\r\n\t\t.then( r => r.json() )\r\n\t\t.then( data => {\r\n\t\t\tif ( !data.ok ) {\r\n\t\t\t\tthrow new Error( data.error || 'Failed to scan folders' );\r\n\t\t\t}\r\n\r\n\t\t\tgroups = data.groups || [];\r\n\r\n\t\t\tif ( !groups.length ) {\r\n\t\t\t\t// Graceful empty state\r\n\t\t\t\tgroupEl.innerHTML = `<option value=\"\">No folders defined</option>`;\r\n\t\t\t\tgroupEl.disabled = true;\r\n\r\n\t\t\t\tfolderEl.innerHTML = `<option value=\"\">No subfolders</option>`;\r\n\t\t\t\tfolderEl.disabled = true;\r\n\r\n\t\t\t\tconst filesStatus = document.getElementById( 'export-files-status' );\r\n\t\t\t\tif ( filesStatus ) {\r\n\t\t\t\t\tfilesStatus.innerHTML = 'No folders defined. Add entries to <code>config/folders.json</code> to enable file exports.';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Hide media options just in case\r\n\t\t\t\tconst uploadsModeRow = document.getElementById( 'uploads-mode-row' );\r\n\t\t\t\tif ( uploadsModeRow ) uploadsModeRow.style.display = 'none';\r\n\r\n\t\t\t\treturn; // stop here\r\n\t\t\t}\r\n\r\n\t\t\trenderGroups( groupEl, groups );\r\n\t\t\tif ( groupEl.options.length ) {\r\n\t\t\t\tgroupEl.dispatchEvent( new Event( 'change' ) );\r\n\t\t\t}\r\n\t\t} )\r\n\t\t.catch( err => {\r\n\t\t\tconsole.error( err );\r\n\t\t\tgroupEl.innerHTML = `<option value=\"\">Error loading groups</option>`;\r\n\t\t\tgroupEl.disabled = true;\r\n\t\t\tfolderEl.innerHTML = `<option value=\"\">—</option>`;\r\n\t\t\tfolderEl.disabled = true;\r\n\t\t} );\r\n\r\n\tfetch( `${ window.BASE_URL }partials/export.php?action=dbs`, {credentials: 'same-origin'} )\r\n\t\t.then( r => r.json() )\r\n\t\t.then( data => {\r\n\t\t\tif ( !data.ok ) {\r\n\t\t\t\tthrow new Error( data.error || 'Failed to list databases' );\r\n\t\t\t}\r\n\t\t\trenderDatabases( dbSelect, data.databases || [] );\r\n\t\t} )\r\n\t\t.catch( err => {\r\n\t\t\tconsole.error( err );\r\n\t\t\tdbSelect.innerHTML = `<option value=\"\">Error loading databases</option>`;\r\n\t\t} );\r\n\r\n\t// Events\r\n\tgroupEl.addEventListener( 'change', () => {\r\n\t\tconst idx = parseInt( groupEl.value, 10 );\r\n\t\tconst group = Number.isNaN( idx ) ? null : groups[idx];\r\n\r\n\t\t// Reset UI\r\n\t\tfolderEl.disabled = true;\r\n\t\tfolderEl.innerHTML = `<option value=\"\">Select a group first…</option>`;\r\n\t\tuploadsModeRow.style.display = 'none';\r\n\r\n\t\tconst def = document.querySelector( 'input[name=\"uploadsMode\"][value=\"exclude\"]' );\r\n\t\tif ( def ) def.checked = true;\r\n\r\n\t\tif ( !group ) return;\r\n\r\n\t\trenderFolders( folderEl, group.subfolders );\r\n\t\tfolderEl.disabled = (group.subfolders.length === 0);\r\n\r\n\t\t// Auto-select first folder and trigger its change\r\n\t\tif ( group.subfolders.length > 0 ) {\r\n\t\t\tfolderEl.selectedIndex = 0;\r\n\t\t\tfolderEl.dispatchEvent( new Event( 'change' ) );\r\n\t\t}\r\n\t} );\r\n\r\n\tfolderEl.addEventListener( 'change', () => {\r\n\t\tconst gIdx = parseInt( groupEl.value, 10 );\r\n\t\tconst group = groups[gIdx];\r\n\t\tif ( !group ) return;\r\n\t\tconst sf = group.subfolders.find( s => s.name === folderEl.value );\r\n\t\tconst showUploads = !!(sf && sf.isWordPress && sf.hasUploads);\r\n\r\n\t\tuploadsModeRow.style.display = showUploads ? '' : 'none';\r\n\t\t// default to exclude on change\r\n\t\tconst def = document.querySelector( 'input[name=\"uploadsMode\"][value=\"exclude\"]' );\r\n\t\tif ( def ) def.checked = true;\r\n\t} );\r\n\r\n\tfilesForm.addEventListener( 'submit', e => {\r\n\t\te.preventDefault();\r\n\t\tfilesStatus.textContent = 'Preparing archive…';\r\n\r\n\t\tconst form = new FormData( filesForm );\r\n\t\tform.append( 'action', 'zip' ); // radios are included automatically\r\n\r\n\t\tfetch( `${ window.BASE_URL }partials/export.php`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: form,\r\n\t\t\tcredentials: 'same-origin'\r\n\t\t} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tif ( !data.ok ) {\r\n\t\t\t\t\tthrow new Error( data.error || 'Export failed' );\r\n\t\t\t\t}\r\n\t\t\t\tfilesStatus.innerHTML = `Done. <a href=\"${ window.BASE_URL }${ data.href }\" download=\"${ data.name }\">${ data.name }</a>`;\r\n\t\t\t\twindow.location.href = `${ window.BASE_URL }${ data.href }`;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} )\r\n\t\t\t.catch( err => {\r\n\t\t\t\tconsole.error( err );\r\n\t\t\t\tfilesStatus.textContent = 'Error: ' + err.message;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} );\r\n\t} );\r\n\r\n\tdbForm.addEventListener( 'submit', e => {\r\n\t\te.preventDefault();\r\n\t\tdbStatus.textContent = 'Dumping database…';\r\n\r\n\t\tconst form = new FormData( dbForm );\r\n\t\tform.append( 'action', 'dumpdb' );\r\n\r\n\t\tfetch( `${ window.BASE_URL }partials/export.php`, {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: form,\r\n\t\t\tcredentials: 'same-origin'\r\n\t\t} )\r\n\t\t\t.then( r => r.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tif ( !data.ok ) {\r\n\t\t\t\t\tthrow new Error( data.error || 'DB export failed' );\r\n\t\t\t\t}\r\n\t\t\t\tdbStatus.innerHTML = `Done. <a href=\"${ window.BASE_URL }${ data.href }\" download=\"${ data.name }\">${ data.name }</a>`;\r\n\t\t\t\twindow.location.href = `${ window.BASE_URL }${ data.href }`;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} )\r\n\t\t\t.catch( err => {\r\n\t\t\t\tconsole.error( err );\r\n\t\t\t\tdbStatus.textContent = 'Error: ' + err.message;\r\n\t\t\t\treturn refreshCsrf();\r\n\t\t\t} );\r\n\t} );\r\n}\r\n","// assets/js/modules/search.js\nexport function initSearch() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst searchBar = document.querySelector( '.search-bar' );\n\t\tif ( searchBar ) {\n\t\t\tsearchBar.addEventListener( 'input', searchProjects );\n\t\t}\n\t} );\n}\n\nexport function searchProjects() {\n\tconst input = document.querySelector( '.search-bar' )?.value.toLowerCase() || '';\n\tconst items = document.querySelectorAll( '.folders li' );\n\n\titems.forEach( item => {\n\t\tconst text = item.textContent.toLowerCase();\n\t\titem.style.display = text.includes( input ) ? '' : 'none';\n\t} );\n}\n","// assets/js/modules/theme.js\r\nexport function initThemeSwitcher() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst selector = document.querySelector( '#theme-selector' );\r\n\t\tif ( !selector ) return;\r\n\r\n\t\t// Use serverTheme first, then fallback to localStorage\r\n\t\tconst saved = localStorage.getItem( 'theme' ) || serverTheme || 'default';\r\n\t\tsetTheme( saved );\r\n\r\n\t\tselector.value = saved;\r\n\t\tselector.addEventListener( 'change', ( e ) => {\r\n\t\t\tconst selected = e.target.value;\r\n\t\t\tsetTheme( selected );\r\n\t\t\tlocalStorage.setItem( 'theme', selected );\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nfunction setTheme( theme ) {\r\n\tdocument.documentElement.className = '';\r\n\r\n\tif ( theme !== 'default' ) {\r\n\t\tdocument.documentElement.classList.add( `${ theme }-theme` );\r\n\t}\r\n\r\n\tdocument.body.classList.remove( 'light-mode' );\r\n\r\n\tif ( typeof themeTypes !== 'undefined' && themeTypes[theme] === 'light' ) {\r\n\t\tdocument.body.classList.add( 'light-mode' );\r\n\t}\r\n}\r\n","// assets/js/modules/vhosts.js\nexport function setupVhostCertButtons() {\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\t\tbindButtons();\n\t\t\tsetupFiltering();\n\t\t\tsetupOpenFolder();\n\t\t} );\n\t} else {\n\t\tbindButtons();\n\t\tsetupFiltering();\n\t\tsetupOpenFolder();\n\t}\n}\n\nfunction bindButtons() {\n\tconst buttons = document.querySelectorAll( '[data-generate-cert]' );\n\n\tbuttons.forEach( button => {\n\t\tbutton.addEventListener( 'click', () => {\n\t\t\tconst name = button.dataset.generateCert;\n\t\t\tif ( confirm( 'Generate a new SSL certificate for ' + name + '?' ) ) {\n\t\t\t\tfetch( `${ window.BASE_URL }utils/generate_cert.php?name=${ encodeURIComponent( name ) }` )\n\t\t\t\t\t.then( res => res.text() )\n\t\t\t\t\t.then( msg => {\n\t\t\t\t\t\talert( msg );\n\t\t\t\t\t\tif ( msg.includes( 'successfully' ) ) {\n\t\t\t\t\t\t\tconst restartBtn = document.getElementById( 'restart-apache' );\n\t\t\t\t\t\t\tif ( restartBtn ) restartBtn.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t} )\n\t\t\t\t\t.catch( () => alert( 'Failed to run cert script.' ) );\n\t\t\t}\n\t\t} );\n\t} );\n}\n\nfunction setupFiltering() {\n\tconst filter = document.getElementById( 'vhost-filter' );\n\tconst rows = document.querySelectorAll( '#vhosts-table tbody tr' );\n\n\tif ( !filter || !rows.length ) return;\n\n\tfilter.addEventListener( 'change', () => {\n\t\tconst value = filter.value;\n\t\tlet visibleCount = 0;\n\n\t\trows.forEach( row => {\n\t\t\tconst isSSL = row.classList.contains( 'vhost-ssl' );\n\t\t\tconst hasCert = row.classList.contains( 'cert-valid' );\n\t\t\tconst hasHost = row.classList.contains( 'host-valid' );\n\n\t\t\tlet show = true;\n\t\t\tif ( value === 'missing-cert' ) show = !hasCert;\n\t\t\telse if ( value === 'missing-host' ) show = !hasHost;\n\t\t\telse if ( value === 'ssl-only' ) show = isSSL;\n\t\t\telse if ( value === 'non-ssl' ) show = !isSSL;\n\n\t\t\trow.style.display = show ? '' : 'none';\n\t\t\tif ( show ) visibleCount++;\n\t\t} );\n\n\t\tconst emptyMsg = document.getElementById( 'vhost-empty-msg' );\n\t\tif ( emptyMsg ) {\n\t\t\temptyMsg.style.display = visibleCount === 0 ? '' : 'none';\n\t\t}\n\t} );\n}\n\nfunction setupOpenFolder() {\n\tdocument.addEventListener( 'click', e => {\n\t\tif ( e.target.matches( '.open-folder' ) ) {\n\t\t\tconst path = e.target.dataset.path.replace( /^\"(.*)\"$/, '$1' );\n\t\t\tif ( path ) {\n\t\t\t\tfetch( `${ window.BASE_URL }utils/open_folder.php`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify( {path} )\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t} );\n}\n","// assets/js/modules/dock.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nexport function initDockConfig() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst dockList = document.getElementById( 'dock-list' );\r\n\t\tconst addBtn = document.getElementById( 'add-dock-item' );\r\n\t\tconst form = document.querySelector( '#settings-view form' );\r\n\r\n\t\tif ( !dockList || !addBtn || !form ) return;\r\n\r\n\t\t// Load current config\r\n\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=dock`, {cache: 'no-store'} )\r\n\t\t\t.then( res => res.json() )\r\n\t\t\t.then( data => {\r\n\t\t\t\tdata.forEach( addDockItem );\r\n\t\t\t\tenableDragSort( '#dock-list' );\r\n\r\n\t\t\t\t// When user reorders items, refresh hidden input\r\n\t\t\t\tdockList.addEventListener( 'sorted', updateInput );\r\n\t\t\t\tupdateInput();\r\n\t\t\t} );\r\n\r\n\t\taddBtn.addEventListener( 'click', () => {\r\n\t\t\taddDockItem();\r\n\t\t\t// enableDragSort is idempotent now; it will only bind to new child\r\n\t\t\tenableDragSort( '#dock-list' );\r\n\t\t\tupdateInput();\r\n\t\t} );\r\n\r\n\t\tfunction addDockItem( item = {} ) {\r\n\t\t\tconst li = document.createElement( 'li' );\r\n\t\t\tli.className = 'dock-item';\r\n\t\t\tli.innerHTML = `\r\n\t\t\t\t<input type=\"text\" placeholder=\"Label\" value=\"${ item.label || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"URL\" value=\"${ item.url || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"Icon\" value=\"${ item.icon || '' }\">\r\n\t\t\t\t<input type=\"text\" placeholder=\"Alt Text\" value=\"${ item.alt || '' }\">\r\n\t\t\t\t<button type=\"button\" class=\"remove-dock-item\">❌</button>\r\n\t\t\t`;\r\n\t\t\tdockList.appendChild( li );\r\n\r\n\t\t\tli.querySelector( '.remove-dock-item' ).addEventListener( 'click', () => {\r\n\t\t\t\tli.remove();\r\n\t\t\t\tupdateInput();\r\n\t\t\t} );\r\n\r\n\t\t\tArray.from( li.querySelectorAll( 'input' ) ).forEach( ( input ) => {\r\n\t\t\t\tinput.addEventListener( 'input', updateInput );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction updateInput() {\r\n\t\t\tconst dockItems = [];\r\n\t\t\tArray.from( dockList.children ).forEach( ( li ) => {\r\n\t\t\t\tconst inputs = li.querySelectorAll( 'input' );\r\n\t\t\t\tif ( inputs.length < 4 ) return;\r\n\t\t\t\tdockItems.push( {\r\n\t\t\t\t\tlabel: inputs[0].value.trim(),\r\n\t\t\t\t\turl: inputs[1].value.trim(),\r\n\t\t\t\t\ticon: inputs[2].value.trim(),\r\n\t\t\t\t\talt: inputs[3].value.trim()\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t\tconst dockJsonInput = document.getElementById( 'dock_json_input' );\r\n\t\t\tif ( dockJsonInput ) {\r\n\t\t\t\tdockJsonInput.value = JSON.stringify( dockItems, null, 2 );\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n}\r\n","// assets/js/modules/folders.js\r\nimport {enableDragSort} from './drag.js';\r\n\r\nexport function initFoldersConfig() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst list = document.getElementById( 'folders-config-list' );\r\n\t\tconst addBtn = document.getElementById( 'add-folder-column' );\r\n\t\tconst jsonInput = document.getElementById( 'folders_json_input' );\r\n\t\tif ( !list || !addBtn || !jsonInput ) return;\r\n\r\n\t\tlet linkTemplates = [];\r\n\t\tlet templateOptionsHtml = `<option value=\"\">(none)</option>`;\r\n\t\tlet dirty = false;\r\n\t\tlet debounceTimer = null;\r\n\r\n\t\t// helpers for specialCases (object map <-> rows)\r\n\r\n\t\tfunction mapToRows( scMap ) {\r\n\t\t\tif ( scMap && typeof scMap === 'object' && !Array.isArray( scMap ) ) {\r\n\t\t\t\treturn Object.entries( scMap ).map( ( [ match, replace ] ) => ({\r\n\t\t\t\t\tmatch: String( match ?? '' ),\r\n\t\t\t\t\treplace: String( replace ?? '' )\r\n\t\t\t\t}) );\r\n\t\t\t}\r\n\t\t\treturn []; // default if missing/invalid\r\n\t\t}\r\n\r\n\t\tfunction rowsToMap( rows ) {\r\n\t\t\tconst map = {};\r\n\t\t\trows.forEach( ( {match = '', replace = ''} ) => {\r\n\t\t\t\tconst m = String( match ).trim();\r\n\t\t\t\tconst r = String( replace ).trim();\r\n\t\t\t\tif ( m.length || r.length ) {\r\n\t\t\t\t\tmap[m] = r; // later duplicates overwrite earlier — deterministic\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\treturn map;\r\n\t\t}\r\n\r\n\t\t// templates\r\n\r\n\t\tfunction fetchLinkTemplates() {\r\n\t\t\tif ( Array.isArray( window.LINK_TEMPLATES ) ) {\r\n\t\t\t\tlinkTemplates = window.LINK_TEMPLATES\r\n\t\t\t\t\t.map( t => t && typeof t.name === 'string' ? t.name.trim() : '' )\r\n\t\t\t\t\t.filter( Boolean );\r\n\t\t\t\tlinkTemplates = Array.from( new Set( linkTemplates ) );\r\n\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>` + linkTemplates.map( n => `<option value=\"${ n }\">${ n }</option>` ).join( '' );\r\n\t\t\t\treturn Promise.resolve( linkTemplates );\r\n\t\t\t}\r\n\r\n\t\t\treturn fetch( `${ window.BASE_URL }utils/read_config.php?file=link_templates`, {cache: 'no-store'} )\r\n\t\t\t\t.then( res => res.json() )\r\n\t\t\t\t.then( data => {\r\n\t\t\t\t\tlinkTemplates = (Array.isArray( data ) ? data : [])\r\n\t\t\t\t\t\t.map( t => t && typeof t.name === 'string' ? t.name.trim() : '' )\r\n\t\t\t\t\t\t.filter( Boolean );\r\n\t\t\t\t\tlinkTemplates = Array.from( new Set( linkTemplates ) );\r\n\t\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>` + linkTemplates.map( n => `<option value=\"${ n }\">${ n }</option>` ).join( '' );\r\n\t\t\t\t\treturn linkTemplates;\r\n\t\t\t\t} )\r\n\t\t\t\t.catch( () => {\r\n\t\t\t\t\tlinkTemplates = [];\r\n\t\t\t\t\ttemplateOptionsHtml = `<option value=\"\">(none)</option>`;\r\n\t\t\t\t\treturn linkTemplates;\r\n\t\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// rendering\r\n\r\n\t\tfunction specialCaseRowHtml( sc = {} ) {\r\n\t\t\tconst matchVal = sc.match || '';\r\n\t\t\tconst replaceVal = sc.replace || '';\r\n\t\t\treturn `\r\n\t\t\t\t<div class=\"special-case\">\r\n\t\t\t\t\t<input type=\"text\" class=\"sc-match\" placeholder=\"Match Regex\" value=\"${ matchVal }\">\r\n\t\t\t\t\t<input type=\"text\" class=\"sc-replace\" placeholder=\"Replace Regex\" value=\"${ replaceVal }\">\r\n\t\t\t\t\t<button type=\"button\" class=\"remove-special\">✖</button>\r\n\t\t\t\t</div>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tfunction folderItemHtml( item = {} ) {\r\n\t\t\tconst casesHtml = mapToRows( item.specialCases ).map( specialCaseRowHtml ).join( '' );\r\n\t\t\tconst selected = item.linkTemplate || '';\r\n\r\n\t\t\treturn `\r\n\t\t\t\t<li class=\"folder-config-item\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"title\" placeholder=\"Title\" value=\"${ item.title || '' }\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"href\" placeholder=\"Href (optional)\" value=\"${ item.href || '' }\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"dir\" placeholder=\"Dir (relative to HTDOCS_PATH)\" value=\"${ item.dir || '' }\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"excludeList\" placeholder=\"Exclude List (comma-separated)\" value=\"${ (item.excludeList || []).join( ',' ) }\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"match\" placeholder=\"Match Regex\" value=\"${ item.urlRules?.match ?? '' }\">\r\n\t\t\t\t\t<input type=\"text\" data-key=\"replace\" placeholder=\"Replace Regex\" value=\"${ item.urlRules?.replace ?? '' }\">\r\n\t\t\t\t\t<label>Link Template:\r\n\t\t\t\t\t\t<select class=\"link-template-select\" name=\"linkTemplate\">${ templateOptionsHtml }</select>\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<label><input type=\"checkbox\" class=\"disable-links\"${ item.disableLinks ? ' checked' : '' }> Disable Links</label>\r\n\r\n\t\t\t\t\t<div class=\"special-cases-wrapper\">\r\n\t\t\t\t\t\t<label>Special Cases:</label>\r\n\t\t\t\t\t\t<div class=\"special-cases\">${ casesHtml }</div>\r\n\t\t\t\t\t\t<button type=\"button\" class=\"add-special\">➕ Add Rule</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<button type=\"button\" class=\"remove-folder-column\">❌</button>\r\n\t\t\t\t</li>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tfunction appendFolderItems( items ) {\r\n\t\t\tconst frag = document.createDocumentFragment();\r\n\t\t\tconst tmp = document.createElement( 'div' );\r\n\t\t\ttmp.innerHTML = items.map( folderItemHtml ).join( '' );\r\n\t\t\tArray.from( tmp.children ).forEach( child => frag.appendChild( child ) );\r\n\t\t\tlist.appendChild( frag );\r\n\r\n\t\t\t// Apply select value + disable state\r\n\t\t\tlist.querySelectorAll( '.folder-config-item' ).forEach( li => {\r\n\t\t\t\tconst select = li.querySelector( '.link-template-select' );\r\n\t\t\t\tif ( select ) {\r\n\t\t\t\t\t// Find the corresponding item by matching the title currently in the li\r\n\t\t\t\t\tconst titleInLi = li.querySelector( 'input[data-key=\"title\"]' )?.value || '';\r\n\t\t\t\t\tconst found = items.find( it => (it.title || '') === titleInLi );\r\n\t\t\t\t\tconst val = found?.linkTemplate || '';\r\n\t\t\t\t\tif ( val ) select.value = val;\r\n\t\t\t\t\tselect.disabled = linkTemplates.length === 0;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tfunction addFolderItem( item = {} ) {\r\n\t\t\tconst tmp = document.createElement( 'div' );\r\n\t\t\ttmp.innerHTML = folderItemHtml( item );\r\n\t\t\tconst li = tmp.firstElementChild;\r\n\t\t\tlist.appendChild( li );\r\n\t\t\tconst select = li.querySelector( '.link-template-select' );\r\n\t\t\tif ( select ) {\r\n\t\t\t\tselect.disabled = linkTemplates.length === 0;\r\n\t\t\t\tif ( item.linkTemplate ) select.value = item.linkTemplate;\r\n\t\t\t}\r\n\t\t\tmarkDirty();\r\n\t\t}\r\n\r\n\t\t// updates\r\n\r\n\t\tfunction markDirty() {\r\n\t\t\tdirty = true;\r\n\t\t\tdebounceUpdate();\r\n\t\t}\r\n\r\n\t\tfunction debounceUpdate() {\r\n\t\t\tif ( debounceTimer ) clearTimeout( debounceTimer );\r\n\t\t\tdebounceTimer = setTimeout( updateInput, 120 );\r\n\t\t}\r\n\r\n\t\tfunction updateInput() {\r\n\t\t\tdebounceTimer = null;\r\n\t\t\tif ( !dirty ) return;\r\n\t\t\tjsonInput.value = JSON.stringify( serializeList(), null, 2 );\r\n\t\t\tdirty = false;\r\n\t\t}\r\n\r\n\t\tfunction serializeList() {\r\n\t\t\tconst items = [];\r\n\t\t\tlist.querySelectorAll( '.folder-config-item' ).forEach( li => {\r\n\t\t\t\tconst get = ( sel ) => li.querySelector( sel );\r\n\r\n\t\t\t\tconst title = get( 'input[data-key=\"title\"]' )?.value.trim() || '';\r\n\t\t\t\tconst href = get( 'input[data-key=\"href\"]' )?.value.trim() || '';\r\n\t\t\t\tconst dir = get( 'input[data-key=\"dir\"]' )?.value.trim() || '';\r\n\t\t\t\tconst excludeStr = get( 'input[data-key=\"excludeList\"]' )?.value || '';\r\n\t\t\t\tconst match = get( 'input[data-key=\"match\"]' )?.value || '';\r\n\t\t\t\tconst replace = get( 'input[data-key=\"replace\"]' )?.value || '';\r\n\t\t\t\tconst linkTemplate = li.querySelector( '.link-template-select' )?.value || '';\r\n\t\t\t\tconst disableLinks = !!li.querySelector( '.disable-links' )?.checked;\r\n\r\n\t\t\t\t// Collect specialCases from rows and convert back to an object map\r\n\t\t\t\tconst scRows = [];\r\n\t\t\t\tli.querySelectorAll( '.special-case' ).forEach( row => {\r\n\t\t\t\t\tconst m = row.querySelector( '.sc-match' )?.value || '';\r\n\t\t\t\t\tconst r = row.querySelector( '.sc-replace' )?.value || '';\r\n\t\t\t\t\tif ( m.length || r.length ) scRows.push( {match: m, replace: r} );\r\n\t\t\t\t} );\r\n\t\t\t\tconst specialCases = rowsToMap( scRows );\r\n\r\n\t\t\t\tconst excludeList = excludeStr.split( ',' ).map( s => s.trim() ).filter( Boolean );\r\n\r\n\t\t\t\tconst record = {\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\thref,\r\n\t\t\t\t\tdir,\r\n\t\t\t\t\texcludeList,\r\n\t\t\t\t\turlRules: {match, replace},\r\n\t\t\t\t\tlinkTemplate,\r\n\t\t\t\t\tdisableLinks,\r\n\t\t\t\t\tspecialCases\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Skip fully empty rows\r\n\t\t\t\tconst hasValue =\r\n\t\t\t\t\ttitle || href || dir || excludeList.length || match || replace || linkTemplate || disableLinks || Object.keys( specialCases ).length;\r\n\t\t\t\tif ( hasValue ) items.push( record );\r\n\t\t\t} );\r\n\t\t\treturn items;\r\n\t\t}\r\n\r\n\t\t// delegated events\r\n\r\n\t\tlist.addEventListener( 'input', ( e ) => {\r\n\t\t\tif ( e.target.matches( 'input[type=\"text\"], select' ) ) {\r\n\t\t\t\tmarkDirty();\r\n\t\t\t}\r\n\t\t} );\r\n\t\tlist.addEventListener( 'change', ( e ) => {\r\n\t\t\tif ( e.target.matches( 'select, input[type=\"checkbox\"]' ) ) {\r\n\t\t\t\tmarkDirty();\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tlist.addEventListener( 'click', ( e ) => {\r\n\t\t\tif ( e.target.closest( '.add-special' ) ) {\r\n\t\t\t\tconst wrap = e.target.closest( '.folder-config-item' )?.querySelector( '.special-cases' );\r\n\t\t\t\tif ( wrap ) {\r\n\t\t\t\t\twrap.insertAdjacentHTML( 'beforeend', specialCaseRowHtml() );\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( e.target.closest( '.remove-special' ) ) {\r\n\t\t\t\tconst row = e.target.closest( '.special-case' );\r\n\t\t\t\tif ( row ) {\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( e.target.closest( '.remove-folder-column' ) ) {\r\n\t\t\t\tconst li = e.target.closest( '.folder-config-item' );\r\n\t\t\t\tif ( li ) {\r\n\t\t\t\t\tli.remove();\r\n\t\t\t\t\tmarkDirty();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tlist.addEventListener( 'sorted', () => {\r\n\t\t\tdirty = true;\r\n\t\t\tupdateInput(); // immediate update after reorder\r\n\t\t} );\r\n\r\n\t\t// init\r\n\r\n\t\tPromise.all( [\r\n\t\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=folders`, {cache: 'no-store'} ).then( r => r.json() ).catch( () => [] ),\r\n\t\t\tfetchLinkTemplates()\r\n\t\t] ).then( ( [ data ] ) => {\r\n\t\t\tenableDragSort( '#folders-config-list' );\r\n\t\t\tif ( Array.isArray( data ) && data.length ) {\r\n\t\t\t\tappendFolderItems( data );\r\n\t\t\t}\r\n\t\t\tif ( list.children.length === 0 ) addFolderItem( {} );\r\n\t\t\tdirty = true;\r\n\t\t\tupdateInput();\r\n\t\t} );\r\n\r\n\t\taddBtn.addEventListener( 'click', () => {\r\n\t\t\taddFolderItem( {} );\r\n\t\t} );\r\n\t} );\r\n}\r\n","// assets/js/modules/linkTemplates.js\nexport function initLinkTemplates() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst list = document.getElementById( 'link-templates-list' );\n\t\tconst addBtn = document.getElementById( 'add-link-template' );\n\t\tif ( !list || !addBtn ) return;\n\n\t\tfunction loadTemplatesFromFile() {\n\t\t\tlist.innerHTML = '';\n\t\t\tfetch( `${ window.BASE_URL }utils/read_config.php?file=link_templates`, {cache: 'no-store'} )\n\t\t\t\t.then( ( res ) => res.json() )\n\t\t\t\t.then( ( data ) => {\n\t\t\t\t\tdata.forEach( addTemplateItem );\n\t\t\t\t\tupdateHiddenInput();\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction updateHiddenInput() {\n\t\t\tconst templates = [];\n\t\t\tlist.querySelectorAll( '.template-item' ).forEach( item => {\n\t\t\t\tconst name = item.querySelector( '.template-name' )?.value.trim();\n\t\t\t\tconst html = item.querySelector( '.template-html' )?.value.trim();\n\t\t\t\tif ( name && html ) templates.push( {name, html} );\n\t\t\t} );\n\n\t\t\tconst hidden = document.getElementById( 'link_templates_json_input' );\n\t\t\tif ( hidden ) hidden.value = JSON.stringify( templates, null, 2 );\n\t\t}\n\n\t\tfunction addTemplateItem( data = {} ) {\n\t\t\tconst li = document.createElement( 'li' );\n\t\t\tli.className = 'template-item';\n\t\t\tli.innerHTML = `\n        <input type=\"text\" class=\"template-name\" placeholder=\"Template Name\" value=\"${ data.name || '' }\">\n        <input type=\"text\" class=\"template-html\" placeholder=\"HTML Template\" value=\"${ data.html || '' }\">\n        <button type=\"button\" class=\"remove-template\">❌</button>\n      `;\n\n\t\t\tli.querySelector( '.remove-template' ).addEventListener( 'click', () => {\n\t\t\t\tli.remove();\n\t\t\t\tupdateHiddenInput();\n\t\t\t} );\n\n\t\t\tArray.from( li.querySelectorAll( 'input' ) ).forEach( input => {\n\t\t\t\tinput.addEventListener( 'input', updateHiddenInput );\n\t\t\t} );\n\n\t\t\tlist.appendChild( li );\n\t\t\tupdateHiddenInput();\n\t\t}\n\n\t\taddBtn.addEventListener( 'click', () => addTemplateItem() );\n\n\t\t// Load templates from file on page load\n\t\tloadTemplatesFromFile();\n\t} );\n}\n","// assets/js/modules/settings.js\r\nexport function initClearStorageButton() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst clearBtn = document.getElementById( 'clear-local-storage' );\r\n\t\tif ( !clearBtn ) return;\r\n\r\n\t\tclearBtn.addEventListener( 'click', () => {\r\n\t\t\tif ( !confirm( \"Are you sure you want to reset saved UI settings?\" ) ) return;\r\n\r\n\t\t\tconst prefixesToRemove = [ 'theme', 'columnOrder', 'columnSize' ];\r\n\r\n\t\t\tObject.keys( localStorage ).forEach( ( key ) => {\r\n\t\t\t\tif ( prefixesToRemove.some( prefix => key.startsWith( prefix ) ) ) {\r\n\t\t\t\t\tlocalStorage.removeItem( key );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\talert( \"Saved settings have been cleared from local storage.\" );\r\n\t\t\tlocation.reload();\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nexport function autoHideConfirmationMessage() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst msg = document.querySelector( '.post-confirmation-container' );\r\n\t\tif ( !msg ) return;\r\n\r\n\t\tsetTimeout( () => {\r\n\t\t\tmsg.style.transition = 'opacity 0.5s ease';\r\n\t\t\tmsg.style.opacity = '0';\r\n\t\t\tsetTimeout( () => msg.remove(), 500 );\r\n\t\t}, 3000 );\r\n\t} );\r\n}\r\n","// assets/js/modules/system.js\nexport function initSystemMonitoring() {\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\n\t\tconst body = document.body;\n\t\tconst systemStatsSection = document.getElementById( 'system-monitor' );\n\n\t\tif ( !systemStatsSection ) return;\n\n\t\tconst ajaxEnabled = body.getAttribute( 'data-ajax-enabled' ) === 'true';\n\t\tif ( !ajaxEnabled ) return;\n\n\t\tconst cpuElem = document.getElementById( 'cpu-load' );\n\t\tconst memElem = document.getElementById( 'memory-usage' );\n\t\tconst diskElem = document.getElementById( 'disk-space' );\n\n\t\tlet statsInterval;\n\n\t\tfunction fetchSystemStats() {\n\t\t\tfetch( `${ window.BASE_URL }utils/system_stats.php`, {cache: 'no-store'} )\n\t\t\t\t.then( response => {\n\t\t\t\t\tif ( !response.ok ) throw new Error( 'System stats unavailable' );\n\t\t\t\t\treturn response.json();\n\t\t\t\t} )\n\t\t\t\t.then( data => {\n\t\t\t\t\tcpuElem.textContent = `${ data.cpu }%`;\n\t\t\t\t\tmemElem.textContent = `${ data.memory } MB`;\n\t\t\t\t\tdiskElem.textContent = `${ data.disk }%`;\n\t\t\t\t} );\n\t\t}\n\n\t\tfunction startMonitoring() {\n\t\t\tstatsInterval = setInterval( fetchSystemStats, 1000 );\n\t\t\tfetchSystemStats();\n\t\t}\n\n\t\t// Only begin polling once we know the backend is returning valid JSON\n\t\tfetch( `${ window.BASE_URL }utils/system_stats.php`, {cache: 'no-store'} )\n\t\t\t.then( response => {\n\t\t\t\tif ( !response.ok ) return;\n\t\t\t\treturn response.json();\n\t\t\t} )\n\t\t\t.then( data => {\n\t\t\t\t// First fetch succeeded — safe to start polling\n\t\t\t\tcpuElem.textContent = `${ data.cpu }%`;\n\t\t\t\tmemElem.textContent = `${ data.memory } MB`;\n\t\t\t\tdiskElem.textContent = `${ data.disk }%`;\n\t\t\t\tstartMonitoring();\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\t// Do nothing — let next AJAX-enabled cycle pick it up silently\n\t\t\t} );\n\t} );\n}\n","// assets/js/modules/view.js\r\nexport function initToggleAccordion() {\r\n\t// Ensure Firefox animates collapses\r\n\tfunction forceReflow( el ) {\r\n\t\tvoid el.offsetHeight;\r\n\t}\r\n\r\n\tfunction isClickInside( e, sel ) {\r\n\t\treturn !!e.target.closest( sel );\r\n\t}\r\n\r\n\tfunction firstFocusable( root ) {\r\n\t\treturn root.querySelector( 'a,button,input,select,textarea,[tabindex]:not([tabindex=\"-1\"])' );\r\n\t}\r\n\r\n\tfunction getTransitionMs( el ) {\r\n\t\tconst cs = getComputedStyle( el );\r\n\t\t// Handles multiple comma-separated durations (take the longest)\r\n\t\tconst parseList = ( s ) => s.split( ',' ).map( v => parseFloat( v ) || 0 );\r\n\t\tconst d = Math.max( ...parseList( cs.transitionDuration ) );\r\n\t\tconst delay = Math.max( ...parseList( cs.transitionDelay ) );\r\n\t\treturn Math.round( (d + delay) * 1000 ) || 0;\r\n\t}\r\n\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tdocument.querySelectorAll( '.toggle-content-container' ).forEach( ( container, index ) => {\r\n\t\t\t// Guard against double init\r\n\t\t\tif ( container.dataset.accordionInit === '1' ) return;\r\n\t\t\tcontainer.dataset.accordionInit = '1';\r\n\r\n\t\t\tconst toggle = container.querySelector( '.toggle-accordion' );\r\n\t\t\tconst content = container.querySelector( '.toggle-content' );\r\n\t\t\tif ( !toggle || !content ) return;\r\n\r\n\t\t\tconst collapsedHeight = parseInt( content.dataset.collapsedHeight ) || 0;\r\n\t\t\tconst accordionId = container.dataset.id || 'accordion-' + index;\r\n\r\n\t\t\t// Animation control\r\n\t\t\tlet animToken = 0;      // bumped for each open/close run\r\n\t\t\tlet fallbackTimer = 0;  // transitionend safety net\r\n\t\t\tlet onEnd = null;       // current transitionend handler\r\n\r\n\t\t\tfunction clearAnimGuards() {\r\n\t\t\t\tif ( onEnd ) {\r\n\t\t\t\t\tcontent.removeEventListener( 'transitionend', onEnd );\r\n\t\t\t\t\tonEnd = null;\r\n\t\t\t\t}\r\n\t\t\t\tif ( fallbackTimer ) {\r\n\t\t\t\t\tclearTimeout( fallbackTimer );\r\n\t\t\t\t\tfallbackTimer = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction setOpenAria( isOpen ) {\r\n\t\t\t\tcontainer.classList.toggle( 'open', isOpen );\r\n\t\t\t\ttoggle.setAttribute( 'aria-expanded', isOpen ? 'true' : 'false' );\r\n\t\t\t\tlocalStorage.setItem( 'accordion_' + accordionId, isOpen ? 'open' : 'closed' );\r\n\t\t\t}\r\n\r\n\t\t\tfunction finishOpen( token ) {\r\n\t\t\t\tif ( token !== animToken ) return;\r\n\t\t\t\tcontent.style.height = 'auto';\r\n\t\t\t}\r\n\r\n\t\t\tfunction finishClose( token ) {\r\n\t\t\t\tif ( token !== animToken ) return;\r\n\t\t\t\tcontent.hidden = true; // remove from tab order after animation\r\n\t\t\t}\r\n\r\n\t\t\tfunction openPanel() {\r\n\t\t\t\tconst token = ++animToken;\r\n\t\t\t\tclearAnimGuards();\r\n\r\n\t\t\t\t// Unhide immediately for any open intent\r\n\t\t\t\tcontent.hidden = false;\r\n\t\t\t\tsetOpenAria( true );\r\n\r\n\t\t\t\t// Animate from collapsed -> target -> auto\r\n\t\t\t\tcontent.style.height = collapsedHeight + 'px';\r\n\t\t\t\tforceReflow( content );\r\n\t\t\t\trequestAnimationFrame( () => {\r\n\t\t\t\t\tif ( token !== animToken ) return;\r\n\t\t\t\t\tconst target = content.scrollHeight;\r\n\t\t\t\t\tcontent.style.height = target + 'px';\r\n\r\n\t\t\t\t\tonEnd = ( e ) => {\r\n\t\t\t\t\t\tif ( e.target !== content || e.propertyName !== 'height' ) return;\r\n\t\t\t\t\t\tclearAnimGuards();\r\n\t\t\t\t\t\tfinishOpen( token );\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcontent.addEventListener( 'transitionend', onEnd );\r\n\r\n\t\t\t\t\tconst ms = getTransitionMs( content );\r\n\t\t\t\t\tif ( ms > 0 ) {\r\n\t\t\t\t\t\tfallbackTimer = setTimeout( () => {\r\n\t\t\t\t\t\t\tclearAnimGuards();\r\n\t\t\t\t\t\t\tfinishOpen( token );\r\n\t\t\t\t\t\t}, ms + 40 );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tfunction closePanel() {\r\n\t\t\t\tconst token = ++animToken;\r\n\t\t\t\tclearAnimGuards();\r\n\r\n\t\t\t\tsetOpenAria( false );\r\n\r\n\t\t\t\t// Animate current -> collapsed, THEN hide\r\n\t\t\t\tcontent.style.height = content.scrollHeight + 'px';\r\n\t\t\t\tforceReflow( content );\r\n\t\t\t\trequestAnimationFrame( () => {\r\n\t\t\t\t\tif ( token !== animToken ) return;\r\n\t\t\t\t\tcontent.style.height = collapsedHeight + 'px';\r\n\r\n\t\t\t\t\tonEnd = ( e ) => {\r\n\t\t\t\t\t\tif ( e.target !== content || e.propertyName !== 'height' ) return;\r\n\t\t\t\t\t\tclearAnimGuards();\r\n\t\t\t\t\t\tfinishClose( token );\r\n\t\t\t\t\t};\r\n\t\t\t\t\tcontent.addEventListener( 'transitionend', onEnd );\r\n\r\n\t\t\t\t\tconst ms = getTransitionMs( content );\r\n\t\t\t\t\tif ( ms > 0 ) {\r\n\t\t\t\t\t\tfallbackTimer = setTimeout( () => {\r\n\t\t\t\t\t\t\tclearAnimGuards();\r\n\t\t\t\t\t\t\tfinishClose( token );\r\n\t\t\t\t\t\t}, ms + 40 );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tfunction togglePanel() {\r\n\t\t\t\tconst willOpen = !container.classList.contains( 'open' );\r\n\t\t\t\t// If opening, guarantee visibility immediately to avoid “stuck hidden”\r\n\t\t\t\tif ( willOpen && content.hidden ) content.hidden = false;\r\n\t\t\t\twillOpen ? openPanel() : closePanel();\r\n\r\n\t\t\t\t// Self-heal if state and hidden diverge\r\n\t\t\t\trequestAnimationFrame( () => {\r\n\t\t\t\t\tconst isOpen = container.classList.contains( 'open' );\r\n\t\t\t\t\tif ( isOpen && content.hidden ) content.hidden = false;\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t// Initial state (restore + ARIA + hidden)\r\n\t\t\tconst saved = localStorage.getItem( 'accordion_' + accordionId );\r\n\t\t\tconst startOpen = saved === 'open';\r\n\t\t\tsetOpenAria( startOpen );\r\n\r\n\t\t\tif ( startOpen ) {\r\n\t\t\t\tcontent.hidden = false; // must be visible to measure\r\n\t\t\t\tcontent.style.height = content.scrollHeight + 'px';\r\n\t\t\t\trequestAnimationFrame( () => {\r\n\t\t\t\t\tcontent.style.height = 'auto';\r\n\t\t\t\t} );\r\n\t\t\t} else {\r\n\t\t\t\tcontent.style.height = collapsedHeight + 'px';\r\n\t\t\t\tcontent.hidden = true; // keyboard users won't tab into closed panel\r\n\t\t\t}\r\n\r\n\t\t\t// Mouse/touch\r\n\t\t\ttoggle.addEventListener( 'click', ( event ) => {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t// Ignore clicks on tooltip icon\r\n\t\t\t\tif ( isClickInside( event, '.tooltip-icon' ) ) return;\r\n\t\t\t\ttogglePanel();\r\n\t\t\t} );\r\n\r\n\t\t\t// Keyboard: Space/Enter toggle; ArrowDown jumps into open panel\r\n\t\t\ttoggle.addEventListener( 'keydown', ( e ) => {\r\n\t\t\t\tif ( e.key === ' ' || e.key === 'Enter' ) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\ttogglePanel();\r\n\t\t\t\t} else if ( e.key === 'ArrowDown' ) {\r\n\t\t\t\t\tif ( container.classList.contains( 'open' ) && !content.hidden ) {\r\n\t\t\t\t\t\tconst target = firstFocusable( content );\r\n\t\t\t\t\t\tif ( target ) target.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\t// Keep heights sane on resize\r\n\t\twindow.addEventListener( 'resize', () => {\r\n\t\t\tdocument.querySelectorAll( '.toggle-content-container.open .toggle-content' ).forEach( ( content ) => {\r\n\t\t\t\tif ( content.hidden ) content.hidden = false;\r\n\t\t\t\tif ( content.style.height !== 'auto' ) {\r\n\t\t\t\t\tcontent.style.height = content.scrollHeight + 'px';\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nexport function initViewToggles() {\r\n\tdocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t\tconst views = {\r\n\t\t\t'index': document.getElementById( 'folders-view' ),\r\n\t\t\t'settings': document.getElementById( 'settings-view' ),\r\n\t\t\t'phpinfo': document.getElementById( 'phpinfo-view' ),\r\n\t\t\t'apache': document.getElementById( 'apache-view' ),\r\n\t\t\t'mysql': document.getElementById( 'mysql-view' ),\r\n\t\t};\r\n\r\n\t\tconst pathMap = {\r\n\t\t\t'index': 'index',\r\n\t\t\t'settings': 'settings',\r\n\t\t\t'phpinfo': 'phpinfo',\r\n\t\t\t'apache-inspector': 'apache',\r\n\t\t\t'mysql-inspector': 'mysql',\r\n\t\t};\r\n\r\n\t\tconst toggleMap = {\r\n\t\t\t'toggle-index': 'index',\r\n\t\t\t'toggle-settings': 'settings',\r\n\t\t\t'toggle-phpinfo': 'phpinfo',\r\n\t\t\t'toggle-apache-inspector': 'apache-inspector',\r\n\t\t\t'toggle-mysql-inspector': 'mysql-inspector',\r\n\t\t};\r\n\r\n\t\tfunction getCurrentRoute() {\r\n\t\t\tconst params = new URLSearchParams( window.location.search );\r\n\t\t\treturn params.get( 'view' ) || 'index';\r\n\t\t}\r\n\r\n\t\tfunction showView( routeKey, push = false ) {\r\n\t\t\tconst key = pathMap[routeKey] || 'index';\r\n\r\n\t\t\tObject.entries( views ).forEach( ( [ k, el ] ) => {\r\n\t\t\t\tif ( el ) el.classList.toggle( 'visible', k === key );\r\n\t\t\t} );\r\n\r\n\t\t\t// Lazy load for Apache and MySQL views\r\n\t\t\tif ( key === 'apache' || key === 'mysql' ) {\r\n\t\t\t\tconst target = views[key];\r\n\t\t\t\tif ( target && !target.dataset.loaded ) {\r\n\t\t\t\t\t// To use a spinning emoji, add the class \"emoji\" to \"loader\" and insert your emoji within the <span>\r\n\t\t\t\t\ttarget.innerHTML = '<div class=\"loader\"><span class=\"spinner\" role=\"img\" aria-label=\"Loading\"></span></div>';\r\n\t\t\t\t\tconst url = `utils/${ key }_inspector.php`;\r\n\r\n\t\t\t\t\tfetch( `${ window.BASE_URL || '/' }${ url }` )\r\n\t\t\t\t\t\t.then( res => res.text() )\r\n\t\t\t\t\t\t.then( html => {\r\n\t\t\t\t\t\t\ttarget.innerHTML = html;\r\n\t\t\t\t\t\t\ttarget.dataset.loaded = 'true';\r\n\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t.catch( err => {\r\n\t\t\t\t\t\t\ttarget.innerHTML = `<p class=\"error\">Failed to load ${ url }</p>`;\r\n\t\t\t\t\t\t\tconsole.error( `[view.js] Failed to fetch ${ url }`, err );\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( push ) {\r\n\t\t\t\tconst base = window.BASE_URL || window.location.pathname;\r\n\t\t\t\tconst param = key === 'index' ? '' : '?view=' + encodeURIComponent( routeKey );\r\n\t\t\t\thistory.pushState( {}, '', base + param );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Attach toggle click handlers\r\n\t\tObject.entries( toggleMap ).forEach( ( [ toggleId, routeKey ] ) => {\r\n\t\t\tconst toggle = document.getElementById( toggleId );\r\n\t\t\tif ( toggle ) {\r\n\t\t\t\ttoggle.addEventListener( 'click', ( e ) => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tshowView( routeKey, true );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\t// Initial load\r\n\t\tshowView( getCurrentRoute() );\r\n\r\n\t\t// Back/forward navigation\r\n\t\twindow.addEventListener( 'popstate', () => {\r\n\t\t\tshowView( getCurrentRoute() );\r\n\t\t} );\r\n\t} );\r\n}\r\n","// assets/js/main.js\nimport '../scss/style.scss';\n\nimport {toggleApache} from './modules/apache.js';\nimport {initClock} from './modules/clock.js';\nimport {setColumnWidth, cycleColumnWidth, initColumnFeatures} from './modules/columns.js';\nimport {initDockConfig} from './modules/dock.js';\nimport {initApacheErrorLog, initPhpErrorLog} from './modules/error.js';\nimport {initExportModule} from './modules/export.js';\nimport {initFoldersConfig} from './modules/folders.js';\nimport {initLinkTemplates} from './modules/linkTemplates.js';\nimport {initSearch} from './modules/search.js';\nimport {initClearStorageButton} from './modules/settings.js';\nimport {autoHideConfirmationMessage} from './modules/settings.js';\nimport {initSystemMonitoring} from './modules/system.js';\nimport {initThemeSwitcher} from './modules/theme.js';\nimport {setupVhostCertButtons} from './modules/vhosts.js';\nimport {initToggleAccordion} from './modules/view.js';\nimport {initViewToggles} from './modules/view.js';\n\n// Initialise on page load\ninitClock();\ninitColumnFeatures();\ninitDockConfig();\ninitFoldersConfig();\ninitLinkTemplates();\ninitApacheErrorLog();\ninitPhpErrorLog();\ninitExportModule();\ninitSearch();\ninitClearStorageButton();\nautoHideConfirmationMessage();\ninitSystemMonitoring();\ninitThemeSwitcher();\nsetupVhostCertButtons();\ninitToggleAccordion();\ninitViewToggles();\n"],"names":["updateClock","clock","document","querySelector","now","Date","textContent","toLocaleTimeString","hour","minute","second","hour12","addEventListener","btn","getElementById","action","messageBox","innerText","fetch","concat","window","BASE_URL","method","headers","body","encodeURIComponent","then","response","text","data","JSON","parse","message","renderServerInfo","e","console","error","_initialisedLists","WeakSet","enableDragSort","listSelector","_opts$allowHandleInte","opts","arguments","length","undefined","list","has","add","itemsSelector","items","handleSelector","handle","interactiveSelector","allowInsideHandle","allowHandleInteractive","dragSrcEl","dragging","item","target","closest","contains","isHandleHit","draggable","capture","dataTransfer","effectAllowed","setData","_","classList","preventDefault","remove","children","Array","from","querySelectorAll","indexOf","to","after","before","dispatchEvent","CustomEvent","bubbles","forEach","el","setColumnWidth","size","localStorage","setItem","columnsDiv","cls","startsWith","cycleColumnWidth","direction","sizes","current","getItem","idx","nextIdx","initGenericErrorLog","_ref","sectionId","toggleButtonId","logElementId","endpoint","toggleBtn","logElement","isVisible","toggle","this","setAttribute","getAttribute","cache","res","ok","Promise","reject","displayLogContent","setInterval","fetchLog","isEmpty","trim","innerHTML","setupExport","groupEl","folderEl","uploadsModeRow","filesForm","filesStatus","dbForm","dbSelect","dbStatus","groups","refreshCsrf","credentials","r","json","Error","selectEl","g","opt","createElement","value","String","index","title","appendChild","renderGroups","options","Event","disabled","style","display","err","dbs","databases","name","parseInt","group","Number","isNaN","subfolders","def","checked","sf","selectedIndex","gIdx","find","s","showUploads","isWordPress","hasUploads","form","FormData","append","href","location","d","token","searchProjects","_document$querySelect","input","toLowerCase","includes","setTheme","theme","documentElement","className","themeTypes","bindButtons","button","dataset","generateCert","confirm","msg","alert","restartBtn","click","setupFiltering","filter","rows","visibleCount","row","isSSL","hasCert","hasHost","show","emptyMsg","setupOpenFolder","matches","path","replace","stringify","container","columnSizes","savedSize","resetBtn","prevBtn","nextBtn","savedOrder","isArray","id","col","order","map","Boolean","dockList","addBtn","addDockItem","li","label","url","icon","alt","updateInput","dockItems","inputs","push","dockJsonInput","jsonInput","linkTemplates","templateOptionsHtml","dirty","debounceTimer","markDirty","_e$target$closest","wrap","insertAdjacentHTML","specialCaseRowHtml","all","LINK_TEMPLATES","t","Set","n","join","resolve","_ref4","frag","tmp","_slicedToArray","createDocumentFragment","folderItemHtml","child","select","_li$querySelector","titleInLi","found","it","val","linkTemplate","addFolderItem","sc","matchVal","match","replaceVal","_item$urlRules$match","_item$urlRules","_item$urlRules$replac","_item$urlRules2","scMap","casesHtml","specialCases","_typeof","Object","entries","_ref2","dir","excludeList","urlRules","disableLinks","firstElementChild","clearTimeout","setTimeout","_get","_get2","_get3","_get4","_get5","_get6","_li$querySelector2","_li$querySelector3","get","sel","excludeStr","scRows","_row$querySelector","_row$querySelector2","m","_ref3","_ref3$match","_ref3$replace","split","record","keys","updateHiddenInput","templates","_item$querySelector","_item$querySelector2","html","hidden","addTemplateItem","readyState","searchBar","clearBtn","prefixesToRemove","key","some","prefix","removeItem","reload","transition","opacity","cpuElem","memElem","diskElem","cpu","memory","disk","fetchSystemStats","selector","saved","serverTheme","selected","forceReflow","offsetHeight","getTransitionMs","cs","getComputedStyle","parseList","v","parseFloat","Math","max","apply","_toConsumableArray","transitionDuration","delay","transitionDelay","round","accordionInit","content","collapsedHeight","accordionId","animToken","fallbackTimer","onEnd","startOpen","setOpenAria","height","scrollHeight","requestAnimationFrame","event","stopPropagation","togglePanel","focus","clearAnimGuards","removeEventListener","isOpen","finishOpen","finishClose","willOpen","propertyName","ms","closePanel","initToggleAccordion","views","pathMap","getCurrentRoute","URLSearchParams","search","showView","routeKey","k","loaded","base","pathname","param","history","pushState","toggleId"],"sourceRoot":""}