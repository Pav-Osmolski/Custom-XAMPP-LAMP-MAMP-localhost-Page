function updateClock(){var e=new Date,t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),e=e.getSeconds().toString().padStart(2,"0");document.querySelector(".clock").textContent=t+`:${n}:`+e}function searchProjects(){let t=document.querySelector(".search-bar").value.toLowerCase();document.querySelectorAll(".folders li").forEach(e=>{e.textContent.toLowerCase().includes(t)?e.style.display="":e.style.display="none"})}setInterval(updateClock,1e3),document.addEventListener("DOMContentLoaded",updateClock),document.addEventListener("DOMContentLoaded",function(){"light"===localStorage.getItem("theme")&&(document.documentElement.classList.add("light-mode"),document.body.classList.add("light-mode")),document.querySelector(".toggle-theme").addEventListener("click",function(){document.documentElement.classList.toggle("light-mode"),document.body.classList.toggle("light-mode"),document.documentElement.classList.contains("light-mode")?localStorage.setItem("theme","light"):localStorage.setItem("theme","dark")})}),document.addEventListener("DOMContentLoaded",function(){let n="true"===document.body.getAttribute("data-ajax-enabled");if(document.getElementById("error-log-section")){function e(){var e=n?"ajax_apache_error_log.php":"apache_error_log.php";fetch(e,{cache:"no-store"}).then(e=>{if(e.ok)return e.text();throw new Error("Error log unavailable")}).then(e=>{document.getElementById("error-log").innerHTML=`<code>${e}</code>`}).catch(e=>{console.error("Error fetching error log:",e),clearInterval(t)})}document.getElementById("toggle-error-log").addEventListener("click",function(){var e=document.getElementById("error-log"),t="block"===e.style.display;e.style.display=t?"none":"block",this.setAttribute("aria-expanded",!t)});let t=setInterval(e,3e3);e()}if(document.getElementById("system-monitor")){function o(){var e=n?"ajax_system_stats.php":"system_stats.php";fetch(e,{cache:"no-store"}).then(e=>{if(e.ok)return e.json();throw new Error("System stats unavailable")}).then(e=>{document.getElementById("cpu-load").textContent=e.cpu+"%",document.getElementById("memory-usage").textContent=e.memory+" MB",document.getElementById("disk-space").textContent=e.disk+"%"}).catch(e=>{console.error("Error fetching system stats:",e),clearInterval(t)})}let t=setInterval(o,1e3);o()}});let columnSizes=["max-800","max-1300","max-1600"];function setColumnWidth(e){localStorage.setItem("columnSize",e);let t=document.querySelector(".columns");t&&(t.classList.forEach(e=>{e.startsWith("max-")&&t.classList.remove(e)}),"auto"!==e)&&t.classList.add(e)}function cycleColumnWidth(e){var t=localStorage.getItem("columnSize");let n=columnSizes.indexOf(t);-1===n&&(n="next"===e?-1:0),"next"===e&&n<columnSizes.length-1?n+=1:"prev"===e&&0<n&&--n,setColumnWidth(columnSizes[n])}document.addEventListener("DOMContentLoaded",function(){var e=localStorage.getItem("columnSize");e&&setColumnWidth(e)}),document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("folders-view"),n=document.getElementById("settings-view");var e=document.getElementById("toggle-index"),o=document.getElementById("toggle-settings");e&&e.addEventListener("click",function(e){e.preventDefault(),t.style.display="block",n.style.display="none"}),o&&o.addEventListener("click",function(e){e.preventDefault(),n.style.display="block",t.style.display="none"})}),document.addEventListener("DOMContentLoaded",function(){let l=document.querySelector(".columns");if(l){let o=null;var e=JSON.parse(localStorage.getItem("columnOrder")||"[]");e.length&&e.forEach(e=>{e=document.getElementById(e);e&&l.appendChild(e)}),l.querySelectorAll(".column:not(.column-controls)").forEach(n=>{var e=n.querySelector(".drag-handle");e&&(n.setAttribute("draggable",!1),e.addEventListener("mousedown",()=>{n.setAttribute("draggable",!0)}),e.addEventListener("mouseup",()=>{n.setAttribute("draggable",!1)}),n.addEventListener("dragstart",()=>{(o=n).style.opacity="0.5"}),n.addEventListener("dragend",()=>{var e;o=null,n.style.opacity="1",n.setAttribute("draggable",!1),e=Array.from(l.children).filter(e=>!e.classList.contains("column-controls")).map(e=>e.id),localStorage.setItem("columnOrder",JSON.stringify(e))}),n.addEventListener("dragover",e=>e.preventDefault()),n.addEventListener("drop",e=>{var t;e.preventDefault(),o&&o!==n&&(t=(e=[...l.children]).indexOf(n),e.indexOf(o)<t?n.after(o):n.before(o))}))})}}),document.addEventListener("DOMContentLoaded",function(){let o=document.getElementById("dock-list");var e=document.getElementById("add-dock-item");if(o&&e){fetch("partials/dock.json").then(e=>e.json()).then(e=>{e.forEach(t)}),e.onclick=()=>t(),o.addEventListener("dragover",e=>{e.preventDefault();var t=o.querySelector(".dragging"),e=((e,o)=>(e=[...e.querySelectorAll(".dock-item:not(.dragging)")]).reduce((e,t)=>{var n=t.getBoundingClientRect(),n=o-n.top-n.height/2;return n<0&&n>e.offset?{offset:n,element:t}:e},{offset:Number.NEGATIVE_INFINITY}).element)(o,e.clientY);null==e?o.appendChild(t):o.insertBefore(t,e)});let n=document.querySelector("#settings-view form");function t(e={}){let t=document.createElement("li");var n;t.className="dock-item",t.draggable=!0,t.innerHTML=`
            <input type="text" placeholder="Label" value="${e.label||""}">
            <input type="text" placeholder="URL" value="${e.url||""}">
            <input type="text" placeholder="Icon" value="${e.icon||""}">
            <input type="text" placeholder="Alt Text" value="${e.alt||""}">
            <button class="remove">üóëÔ∏è</button>
        `,o.appendChild(t),t.querySelector(".remove").onclick=()=>t.remove(),(n=t).addEventListener("dragstart",e=>{n.classList.add("dragging")}),n.addEventListener("dragend",e=>{n.classList.remove("dragging")})}n.addEventListener("submit",()=>{var e=[...o.querySelectorAll(".dock-item")].map(e=>{var[e,t,n,o]=e.querySelectorAll("input");return{label:e.value,url:t.value,icon:n.value,alt:o.value}}),t=document.createElement("input");t.type="hidden",t.name="dock_json",t.value=JSON.stringify(e),n.appendChild(t)})}});